<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ganesh Dai Academy — Your SEE Companion</title>
  <meta name="description" content="Ganesh Dai Academy — The ultimate SEE preparation platform with personalized notes, model questions, past papers, study plans, quizzes, and a digital library for Grade 10." />
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- React + ReactDOM -->
  <script src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  
  <!-- Babel -->
  <script src="https://unpkg.com/@babel/standalone@7.24.7/babel.min.js"></script>
  
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet" />
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700;800&family=Playfair+Display:wght@700&family=Caveat:wght@700&display=swap" rel="stylesheet">
  
  <!-- html2canvas for downloads -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  
  <style>
    :root { 
      --primary-500: #3b82f6; --primary-600: #2563eb;
      --secondary-500: #8b5cf6; --secondary-600: #7c3aed;
      --accent-500: #10b981; --accent-600: #059669;
      --danger-500: #ef4444; --warning-500: #f59e0b;
      --bg-color-light: #f8fafc; --bg-color-dark: #020617;
    }
    html, body { scroll-behavior: smooth; }
    body { font-family: 'Inter', system-ui, sans-serif; background-color: var(--bg-color-light); color: #334155; }
    .dark body { background-color: var(--bg-color-dark); color: #cbd5e1; }
    
    .animated-gradient-bg { background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab); background-size: 400% 400%; animation: gradient-animation 15s ease infinite; }
    @keyframes gradient-animation { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    
    .font-display { font-family: 'Poppins', sans-serif; }
    .font-serif-display { font-family: 'Playfair Display', serif; }
    .font-handwriting { font-family: 'Caveat', cursive; }
    
    .gradient-text { background-clip: text; -webkit-background-clip: text; color: transparent; background-image: linear-gradient(45deg, var(--primary-500), var(--secondary-500)); }
    .btn-grad { background-image: linear-gradient(45deg, var(--primary-500) 0%, var(--secondary-500) 100%); color: #fff; transition: all .3s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border: none; }
    .btn-grad:hover:not(:disabled) { transform: translateY(-2px) scale(1.02); box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3); }
    button:disabled { cursor: not-allowed; opacity: 0.6; }

    @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
    @keyframes slideInUp { from { opacity:0; transform: translateY(20px); } to { opacity:1; transform: translateY(0); } }
    @keyframes slideInDown { from { opacity:0; transform: translateY(-20px); } to { opacity:1; transform: translateY(0); } }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    @keyframes popIn { 0% { opacity:0; transform: scale(0.8); } 100% { opacity:1; transform: scale(1); } }
    @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-15px); } 100% { transform: translateY(0px); } }
    @keyframes twinkle { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }
    @keyframes confettiRain { 0% { transform: translateY(-100px) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(360deg); opacity: 0; } }

    .fade-in { animation: fadeIn .6s ease-out forwards; }
    .slide-in-up { opacity: 0; animation: slideInUp .6s ease-out forwards; }
    .spinner { animation: spin 1s linear infinite; }
    
    .overlay { position: fixed; inset: 0; background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(8px); display:flex; align-items:center; justify-content:center; padding: 1rem; z-index: 1000; animation: fadeIn .3s ease; }
    .modal { width: 96vw; max-width: 1200px; height: 92vh; background:#0f172a; border: 1px solid #334155; border-radius:.75rem; overflow:hidden; display:flex; flex-direction:column; animation: slideInUp .4s ease-out; }
    .modal-box { max-width: 480px; width: 100%; border-radius: 1rem; overflow: hidden; animation: popIn 0.4s ease-out; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); }
    
    .card { background-color: #ffffff; border-radius: 0.75rem; transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05), 0 2px 4px -2px rgba(0,0,0,0.05); border: 1px solid #e2e8f0; }
    .dark .card { background-color: rgba(30, 41, 59, 0.7); border-color: #334155; backdrop-filter: blur(16px); }
    .card:hover { transform: translateY(-8px) scale(1.01); box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1); }
  
    .confetti { position: absolute; width: 10px; height: 10px; opacity: 0; }
    .confetti:nth-child(1) { left: 10%; background-color: #f9c41a; } 
    .confetti:nth-child(2) { left: 20%; background-color: #3b82f6; } 
    .confetti:nth-child(3) { left: 30%; background-color: #10b981; } 
    .confetti:nth-child(4) { left: 40%; background-color: #8b5cf6; } 
    .confetti:nth-child(5) { left: 50%; background-color: #ef4444; } 
    .confetti:nth-child(6) { left: 60%; background-color: #f9c41a; } 
    .confetti:nth-child(7) { left: 70%; background-color: #3b82f6; } 
    .confetti:nth-child(8) { left: 80%; background-color: #10b981; } 
    .confetti:nth-child(9) { left: 90%; background-color: #8b5cf6; } 
    .confetti:nth-child(10) { left: 5%; background-color: #ef4444; }
    
    /* PDF Viewer Styles */
    .pdf-viewer-modal { display: flex; flex-direction: column; width: 96vw; max-width: 1200px; height: 92vh; background: #0f172a; border: 1px solid #334155; border-radius: 0.75rem; overflow: hidden; animation: slideInUp 0.4s ease-out; }
    .pdf-viewer-modal .header { display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: #1e293b; border-bottom: 1px solid #334155; }
    .pdf-viewer-modal .header h3 { color: white; font-weight: 600; flex: 1; margin: 0; }
    .pdf-viewer-modal .header .close-button { background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: background-color 0.2s; }
    .pdf-viewer-modal .header .close-button:hover { background-color: rgba(255, 255, 255, 0.1); }
    
    /* Glassmorphism effect */
    .glassmorphism { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }
    
    /* Study Timer Styles */
    .timer-circle { transform: rotate(-90deg); }
    .timer-circle-bg { fill: none; stroke: #e2e8f0; stroke-width: 8; }
    .timer-circle-progress { fill: none; stroke: #3b82f6; stroke-width: 8; stroke-linecap: round; transition: stroke-dashoffset 1s linear; }
    
    /* Achievement Badge Styles */
    .badge { display: inline-flex; align-items: center; justify-content: center; border-radius: 9999px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }
    .badge-bronze { background: linear-gradient(135deg, #cd7f32, #a56a2b); color: white; }
    .badge-silver { background: linear-gradient(135deg, #c0c0c0, #a8a8a8); color: #1f2937; }
    .badge-gold { background: linear-gradient(135deg, #ffd700, #d4af37); color: #1f2937; }
    .badge-platinum { background: linear-gradient(135deg, #e5e4e2, #b4b4b4); color: #1f2937; }
    
    /* Progress Bar */
    .progress-bar { height: 8px; background-color: #e2e8f0; border-radius: 4px; overflow: hidden; }
    .progress-bar-fill { height: 100%; background: linear-gradient(90deg, #3b82f6, #8b5cf6); transition: width 0.5s ease; }
    
    /* Custom Animations */
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .animate-float {
      animation: float 6s ease-in-out infinite;
    }
    .animate-fadeInUp {
      animation: fadeInUp 0.6s ease-out forwards;
    }
    .animation-delay-2000 {
      animation-delay: 2s;
    }
    .animation-delay-4000 {
      animation-delay: 4s;
    }
    .animation-delay-300 {
      animation-delay: 300ms;
    }
    .animation-delay-1000 {
      animation-delay: 1000ms;
    }
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useMemo, useState, useCallback, Fragment, useRef, memo } = React;

    // =================================================================================================
    // --- EDITABLE DATA STORE ---
    // =================================================================================================
    const DATA = {
      name: "Ganesh Dai Academy",
      subtitle: "Your SEE Companion",
      logoUrl: "https://raw.githubusercontent.com/Ganeshdaiacademy/org/f6c2e63ee2a5a18972619ddd9b87fa02a8d29cf2/YT%20LOGO.png",
      social: { youtube: "https://www.youtube.com/@Genz-Sir", facebook: "https://www.facebook.com/CrackSEE2082" },
      whatsapp: { number: "9826594548", message: "Hello Ganesh Dai, I have a question about my SEE preparation..." },
      payment: { 
        esewaId: "9767496685", 
        amount: "199", 
        whatsAppContactLink: "https://wa.me/9779826594548?text=Hello%20Ganesh%20Dai,%20I%20have%20paid%20for%20premium%20access.%20Please%20provide%20my%20activation%20code.",
        premiumFeatures: [
          "Unlimited access to all premium notes",
          "Download all PDF materials",
          "Full quiz access beyond trial",
          "Priority support",
          "Study progress tracking",
          "Achievement badges"
        ]
      },
      aboutContent: {
        mission: "Our mission is to empower every SEE student in Nepal with free, high-quality, and accessible digital resources. We believe that with the right tools, every student has the potential to excel. This platform is your digital 'Dai'—a reliable guide on your journey to success.",
        disclaimer: "Most study materials on this platform are created by me. However, some files are collected from various online sources for educational purposes. All rights go to the respective owners. If you are a copyright holder and want your material removed or credited differently, please contact me.",
        founder: "Ganesh Dahal", 
        version: "v2.0.0"
      },
      afterSEE: {
        title: "Kathmandu Metro Scholarship",
        description: "Prepare for the next step in your academic journey. This course is designed to help you excel in the scholarship entrance exam conducted by Kathmandu Metropolitan City for Grade 11.",
        link: "https://missionbalenscholarshipquiz.github.io/MissionBalenScholarship/"
      },
      // Motivational Quotes
      motivationalQuotes: [
        "The secret of getting ahead is getting started.",
        "Don't let what you cannot do interfere with what you can do.",
        "Success is the sum of small efforts, repeated day in and day out.",
        "The expert in anything was once a beginner.",
        "Your education is a dress rehearsal for a life that is yours to lead.",
        "The beautiful thing about learning is that no one can take it away from you."
      ],
      // Brain Teasers
      brainTeasers: [
        { question: "I speak without a mouth and hear without ears. I have no body, but I come alive with wind. What am I?", answer: "An echo" },
        { question: "You measure my life in hours and I serve you by expiring. I'm quick when I'm thin and slow when I'm fat. The wind is my enemy. What am I?", answer: "A candle" },
        { question: "I have cities, but no houses. I have mountains, but no trees. I have water, but no fish. What am I?", answer: "A map" }
      ],
      // Videos
      videos: [
        { id: 1, title: "SEE Preparation Strategy", youtubeId: "dQw4w9WgXcQ", description: "Learn how to effectively prepare for your SEE exams." },
        { id: 2, title: "Mathematics Tips & Tricks", youtubeId: "dQw4w9WgXcQ", description: "Important techniques to solve math problems quickly." },
        { id: 3, title: "Science Important Questions", youtubeId: "dQw4w9WgXcQ", description: "Focus on these science topics for better scores." }
      ],
      // Quizzes
      quizzes: {
        "Science": { 
            title: "Science Quizzes", 
            icon: "fa-solid fa-flask", 
            chapters: { 
               "Scientific Study": {
                  questions: [
                    { question: "How many types of variables are there?", options: ["3", "4", "5", "6"], correctAnswer: "4" },
                    { question: "The variable that can be controlled while doing the experiment is called:", options: ["Independent", "Controlled", "Dependent", "Constant"], correctAnswer: "Controlled" },
                  ]
                },
                "Classification of Living Beings": {
                  questions: [
                    { question: "Which of the following plants belongs to division Algae?", options: ["Riccia", "Volvox", "Cycas", "Liverworts"], correctAnswer: "Volvox" },
                    { question: "Why is Juniper kept in sub-division Gymnosperms?", options: ["It has needle-shaped leaves", "It has naked seeds", "It has chlorophyll", "It has cones instead of fruit"], correctAnswer: "It has naked seeds" },
                    { question: "Identify the dicot plant from the following:", options: ["Garlic", "Maize", "Bamboo", "Apple"], correctAnswer: "Apple" },
                  ]
                },
            }
        }, 
        "English": { 
            title: "English Quizzes", 
            icon: "fa-solid fa-book-atlas", 
            chapters: { 
                "Tenses": { 
                    questions: [
                        { question: "She ___ to the store every day.", options: ["go", "goes", "is going", "went"], correctAnswer: "goes" },
                        { question: "They ___ playing football when it started to rain.", options: ["was", "is", "were", "are"], correctAnswer: "were" }
                    ] 
                }, 
                "Synonyms": { 
                    questions: [
                        { question: "What is a synonym for 'happy'?", options: ["Sad", "Joyful", "Angry", "Tired"], correctAnswer: "Joyful" }
                    ] 
                }, 
            } 
        },
        "Mathematics": { 
            title: "Mathematics Quizzes", 
            icon: "fa-solid fa-calculator", 
            chapters: { 
                "Algebra": { 
                    questions: [
                        { question: "If x=3, what is 2x + 5?", options: ["10", "11", "12", "13"], correctAnswer: "11" },
                        { question: "Factorize: x² - 9", options: ["(x-3)²", "(x+3)²", "(x-3)(x+3)", "(x-9)(x+9)"], correctAnswer: "(x-3)(x+3)" }
                    ] 
                }, 
                "Geometry": { 
                    questions: [
                        { question: "Area of a square with side 'a'?", options: ["2a", "4a", "a²", "a³"], correctAnswer: "a²" }
                    ] 
                }, 
            } 
        },
      },
      subjects: ["Mathematics", "Science", "English", "Nepali", "Social Studies"],
      subjectIcons: { 
        "Mathematics": "fa-solid fa-calculator", 
        "Science": "fa-solid fa-flask", 
        "English": "fa-solid fa-book-atlas", 
        "Nepali": "fa-solid fa-feather-pointed", 
        "Social Studies": "fa-solid fa-landmark", 
        "Default": "fa-solid fa-book" 
      },
     
      // Notes with premium/free distinction
      notes: [
      { id: 201, subject: "Science", title: "Scientific Study", summary: "Full exercise", link: "https://drive.google.com/file/d/10U1qLJ6An1BleaIXOx89fXFsqSN_OYLt/view?usp=drive_link", isPremium: false },
{ id: 202, subject: "Science", title: "Classification of Living Beings", summary: "Full exercise", link: "https://drive.google.com/file/d/193DPf5uSN7QQQCT80igF99QegiwTEnfy/view?usp=drive_link", isPremium: false },
{ id: 203, subject: "Science", title: "Honey Bee", summary: "Full exercise", link: "https://drive.google.com/file/d/1Hjc5J-rdD43sthl2-PJUqaa-lSFnIb-0/view?usp=drive_link", isPremium: false },
{ id: 204, subject: "Science", title: "Heredity", summary: "Full exercise", link: "https://drive.google.com/file/d/1W9tIx2ZVKMUjJVftyhs_w-PdG4Yc7Bzq/view?usp=drive_link", isPremium: false },
{ id: 205, subject: "Science", title: "Physiological Structure", summary: "Full exercise", link: "https://drive.google.com/file/d/1_0S1f-Mm2mztdrKaMqCiJbm2T4jCGKMh/view?usp=drive_link", isPremium: false },
{ id: 206, subject: "Science", title: "Nature and Environment", summary: "Full exercise", link: "https://drive.google.com/file/d/15sbyTZI9bqZBDCXwRPdAD8VFRNVW1-sr/view?usp=sharing", isPremium: false },

{ id: 207, subject: "Science", title: "Force and Motion", summary: "Full exercise", link: "https://drive.google.com/file/d/1914qyFWQZ6SJJnPo7UPp6jYeTkCjlzXo/view?usp=drive_link", isPremium: false },
{ id: 208, subject: "Science", title: "Pressure", summary: "Full exercise", link: "https://drive.google.com/file/d/1WZj_psW6AoSXQifVKHPSmlk2PUL8GDQD/view?usp=drive_link", isPremium: false },
{ id: 209, subject: "Science", title: "Heat", summary: "Full notes with Full exercise", link: "https://drive.google.com/file/d/1asw70BTVddb-m3Q9RfDy94ss-9ehtW0H/view?usp=drive_link", isPremium: false },
{ id: 210, subject: "Science", title: "Wave", summary: "Full exercise", link: "https://drive.google.com/file/d/16e5sFx5AOHHAXD6LfVCr8AfWqWtt8x0c/view?usp=drive_link", isPremium: false },
{ id: 211, subject: "Science", title: "Electricity and Magnetism", summary: "Full exercise", link: "https://drive.google.com/file/d/1zS64NH1TY2l2Xjlw6QvsgGX0GNb42qHD/view?usp=drive_link", isPremium: false },

{ id: 212, subject: "Science", title: "Universe", summary: "Full exercise", link: "https://drive.google.com/file/d/1Af_oEnuEV4IkTs46P-TO1kvu8HMw1607/view?usp=drive_link", isPremium: false },
{ id: 213, subject: "Science", title: "Information and Communication Technology", summary: "Full exercise", link: "https://drive.google.com/file/d/1TUKZwpl00n_OG0OdR7NSEAbxbyRpruZt/view?usp=drive_link", isPremium: false },

{ id: 214, subject: "Science", title: "Classification of Elements", summary: "Full exercise", link: "https://drive.google.com/file/d/1lpYXF2FHV9VO0zcbjsBqJsRPhWs1NxO8/view?usp=drive_link", isPremium: false },
{ id: 215, subject: "Science", title: "Chemical Reaction", summary: "Full exercise", link: "https://drive.google.com/file/d/1KwMNM_ivpN3eF0XVIQTDNvF9C9OPbDsU/view?usp=drive_link", isPremium: false },
{ id: 216, subject: "Science", title: "Metal and Non-Metal", summary: "Full exercise", link: "", isPremium: false },
{ id: 217, subject: "Science", title: "Hydrocarbon and Its Compounds", summary: "Full exercise", link: "", isPremium: false },
{ id: 218, subject: "Science", title: "Chemicals Used in Daily Life", summary: "Full exercise", link: "", isPremium: false },

      ],
      
      // Library Books with premium/free distinction
      libraryBooks: {
        curriculum: [
         { id: 'b01', title: 'Optional Mathematics Guide', author: 'Ganesh Dai Academy', cover: 'https://placehold.co/400x600/3b82f6/ffffff?text=Optional+Mathematics+Guide', pdf: 'https://drive.google.com/file/d/1rXzVLmLz7ibuJLR8vZb2C9TW0BEWO3LU/view?usp=drive_link', isPremium: true },
         { id: 'b00001', title: 'Science Full Guide', author: 'Ganesh Dai Academy', cover: 'https://placehold.co/400x600/3b82f6/ffffff?text=Science+Guide+Book', pdf: 'https://drive.google.com/file/d/154sLBmppjA-J21tI_rbjT9vZimGp-8zw/view?usp=drive_link', isPremium: true },
         { id: 'b001', title: 'All chapter wise MCQs of science ', author: 'Ganesh Dai Academy', cover: 'https://placehold.co/400x600/3b82f6/ffffff?text=Science+Chapter wise+MCQs', pdf: 'https://drive.google.com/file/d/1VWnXyh0Gdv1y0ohohJWoz3lPTclS3pht/view?usp=drive_link', isPremium: false },
         { id: 'b00001', title: 'Science Guiess MCQs ', author: 'Ganesh Dai Academy', cover: 'https://placehold.co/400x600/3b82f6/ffffff?text=Science+Guess+MCQs', pdf: 'https://drive.google.com/file/d/1SJ-Imjnd-D9mGgmTFZEGgnFfmr5R3uLl/view?usp=drive_link', isPremium: true },

        { id: 'b02', title: 'Science Textbook', author: 'Curriculum Development Center', cover: 'https://placehold.co/400x600/10b981/ffffff?text=Science+Textbook', pdf: 'https://drive.google.com/file/d/1rXzVLmLz7ibuJLR8vZb2C9TW0BEWO3LU/view?usp=sharing', isPremium: false },

        { id: 'b03', title: 'Advanced Mathematics', author: 'Ganesh Dai Academy', cover: 'https://placehold.co/400x600/8b5cf6/ffffff?text=Advanced+Mathematics', pdf: 'https://drive.google.com/file/d/1OxJnWxJt3LIgrOg45FWUK9skJbsLAa6c/view?usp=drive_link', isPremium: true },

        { id: 'b04', title: 'Physic Section One Short', author: 'Ganesh Dai Academy', cover: 'https://placehold.co/400x600/8b5cf6/ffffff?text=Physic+Section+One+Short', pdf: 'https://drive.google.com/file/d/15Ri_zd0zW6uNwWfOh_UiDl8IqcetIIws/view?usp=drive_link', isPremium: false },

        { id: 'b05', title: 'Chemistry Section One Short', author: 'Ganesh Dai Academy', cover: 'https://placehold.co/400x600/8b5cf6/ffffff?text=Chemistry+Section+One+Short', pdf: 'https://drive.google.com/file/d/1e9cAtEd6HTHS7hNuAd21uJrE3ZJwwyAm/view?usp=drive_link', isPremium: true },

        { id: 'b06', title: 'Biology Section One Short', author: 'Ganesh Dai Academy', cover: 'https://placehold.co/400x600/8b5cf6/ffffff?text=Biology+Section+One+Short', pdf: 'https://drive.google.com/file/d/1jSn240CuGwok26BIEWIJGVWTUWWobege/view?usp=drive_link', isPremium: true },

        { id: 'b07', title: 'Mathematics Section One Short', author: 'Ganesh Dai Academy', cover: 'https://placehold.co/400x600/8b5cf6/ffffff?text=Mathematics+Section+One+Short', pdf: 'https://drive.google.com/file/d/12-cb5vKui_7BgMouVDVps8quWgRyRpUP/view?usp=drive_link', isPremium: true },

        { id: 'b08', title: 'English Grammar Tips and trick', author: 'Ganesh Dai Academy', cover: 'https://placehold.co/400x600/8b5cf6/ffffff?text=English+Grammar+Tips+and+Trick', pdf: 'https://drive.google.com/file/d/1UVHbghCBM1ahtAJWL-4BwR1XTuCrxee3/view?usp=drive_link', isPremium: true },

        { id: 'b09', title: 'Mathematics Mix', author: 'Ganesh Dai Academy', cover: 'https://placehold.co/400x600/8b5cf6/ffffff?text=Mathematics+Mix', pdf: 'https://drive.google.com/file/d/1bO8HN82apwAC5xQeNKe9bnWW2JUbi1iv/view?usp=sharing', isPremium: true },

        ],
        otherBooks: [
          { id: 'ob01', title: 'Rich Dad Poor Dad', author: 'Various', cover: 'https://placehold.co/400x600/f59e0b/ffffff?text=General+Knowledge', pdf: 'https://drive.google.com/file/d/0Bxui5Z2avE4wbVFNdG1uaFFfRE0/view?resourcekey=0-ZitNMoCTYpIqvYEzUlBe7Q', isPremium: false },
          { id: 'ob02', title: 'How to Win Friends and Influence People', author: 'Dale Carnegiea', cover: 'https://placehold.co/400x600/ef4444/ffffff?text=Inspirational+Stories', pdf: 'https://drive.google.com/file/d/1rXzVLmLz7ibuJLR8vZb2C9TW0BEWO3LU/view?usp=sharing', isPremium: false },
          { id: 'ob03', title: 'Atomic Habit', author: 'James Clear', cover: 'https://placehold.co/400x600/ec4899/ffffff?text=Atomic+Habit', pdf: 'https://drive.google.com/file/d/1eAZMdXO-Zn4_90TV365KMpIqfxUy7J0t/view', isPremium: true },
        ]
      },
      
      // SEE Preparation Materials
      seePreparation: { 
        routine: { 
          title: "SEE Routine", 
          image: "https://placehold.co/800x500/e2e8f0/334155?text=SEE+Routine", 
          details: "Official routine for SEE." 
        }, 
        questionPapers: [ 
          { id: 'pp1', subject: 'Mathematics', year: 2079, title: 'Mathematics Past Paper (2079)', pdf: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf', isPremium: false }, 
          { id: 'pp2', subject: 'Science', year: 2079, title: 'Science Past Paper (2079)', pdf: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf', isPremium: false },
          { id: 'pp3', subject: 'English', year: 2079, title: 'English Past Paper (2079)', pdf: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf', isPremium: true },
        ], 
        guessPapers: [ 
          { id: 'gp1', subject: 'Science', title: 'Science Model Set 1', description: "Curated by experts.", pdf: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf', isPremium: false }, 
          { id: 'gp2', subject: 'Mathematics', title: 'Mathematics Model Set 1', description: "Important questions for SEE.", pdf: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf', isPremium: true },
        ],
        importantQuestions: [
          { id: 'iq1', subject: 'Mathematics', title: 'Algebra Important Questions', description: 'Most important algebra questions for SEE', pdf: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf', isPremium: false },
          { id: 'iq2', subject: 'Science', title: 'Physics Important Questions', description: 'Key physics questions for SEE preparation', pdf: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf', isPremium: false },
          { id: 'iq3', subject: 'English', title: 'Grammar Important Questions', description: 'Essential grammar questions for SEE', pdf: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf', isPremium: true },
        ]
      },
      
      // Achievements
      achievements: [
        { id: 'ach1', name: 'First Quiz', description: 'Complete your first quiz', icon: 'fa-solid fa-play', points: 10, badge: 'bronze' },
        { id: 'ach2', name: 'Bookworm', description: 'Read 5 different notes', icon: 'fa-solid fa-book', points: 20, badge: 'silver' },
        { id: 'ach3', name: 'Quiz Master', description: 'Score 90% or above in any quiz', icon: 'fa-solid fa-trophy', points: 30, badge: 'gold' },
        { id: 'ach4', name: 'Study Streak', description: 'Study for 5 consecutive days', icon: 'fa-solid fa-fire', points: 50, badge: 'platinum' },
      ]
    };
    // =================================================================================================

    // --- HOOKS, HELPERS & UTILS ---
    const useLocalStorage = (key, initialValue) => { 
      const [storedValue, setStoredValue] = useState(() => { 
        try { 
          const item = window.localStorage.getItem(key); 
          return item ? JSON.parse(item) : initialValue; 
        } catch (error) { 
          return initialValue; 
        } 
      }); 
      const setValue = (value) => { 
        try { 
          const valueToStore = value instanceof Function ? value(storedValue) : value; 
          setStoredValue(valueToStore); 
          window.localStorage.setItem(key, JSON.stringify(valueToStore)); 
        } catch (error) { 
          console.error(error); 
        } 
      }; 
      return [storedValue, setValue]; 
    };
    
    const classNames = (...c) => c.filter(Boolean).join(' ');
    
    const generatePremiumCode = (name) => { 
      if (!name || name.length < 3) return null; 
      const lowerName = name.toLowerCase(); 
      const thirdChar = lowerName[2]; 
      const alphabet = 'abcdefghijklmnopqrstuvwxyz'; 
      const charIndex = alphabet.indexOf(thirdChar); 
      if (charIndex === -1) return `${name}@1234??`; 
      const prevChar = alphabet[(charIndex - 1 + 26) % 26]; 
      const nextChar = alphabet[(charIndex + 1) % 26]; 
      return `${name}@1234${prevChar}${nextChar}`; 
    };
    
    const getGdriveDownloadUrl = (url) => { 
      const match = url.match(/drive\.google\.com\/file\/d\/([a-zA-Z0-9_-]+)/); 
      if (match && match[1]) { 
        return `https://drive.google.com/uc?export=download&id=${match[1]}`; 
      } 
      return url; 
    };

    // --- UI COMPONENTS ---
    const Section = ({ title, subtitle, children, className }) => ( 
      <section className={classNames("max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24", className)}>
        {title && <div className="text-center mb-12 slide-in-up">
          <h2 className="text-3xl md:text-4xl font-display font-bold text-slate-800 dark:text-white">{title}</h2>
          {subtitle && <p className="text-slate-500 dark:text-slate-400 mt-3 max-w-2xl mx-auto">{subtitle}</p>}
        </div>}
        {children}
      </section> 
    );
    
    const NameCaptureModal = ({ onSave }) => ( 
      <div className="overlay">
        <div className="w-full max-w-md p-8 text-center bg-white dark:bg-slate-900 rounded-2xl shadow-2xl slide-in-up">
          <img src={DATA.logoUrl} alt="Logo" className="w-20 h-20 mx-auto mb-4 rounded-full"/>
          <h2 className="text-2xl font-display font-bold text-slate-800 dark:text-white">Welcome!</h2>
          <p className="text-slate-500 dark:text-slate-400 mt-2 mb-6">What should we call you?</p>
          <form onSubmit={(e) => { 
            e.preventDefault(); 
            const name = e.target.elements.name.value.trim(); 
            if(name) onSave(name); 
          }}>
            <input type="text" name="name" placeholder="Enter your first name" className="w-full px-4 py-3 text-lg text-center rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-primary-500 outline-none" autoFocus required />
            <button type="submit" className="w-full btn-grad mt-4 px-6 py-3 rounded-lg font-semibold text-lg">Let's Get Started</button>
          </form>
        </div>
      </div> 
    );
    
    const WelcomeCelebration = ({ name }) => {
        useEffect(() => {
            const confettiElements = document.querySelectorAll('.confetti');
            confettiElements.forEach((confetti, index) => {
                const left = Math.random() * 100;
                const animationDuration = 1 + Math.random() * 2;
                const animationDelay = Math.random() * 2;
                
                confetti.style.left = `${left}%`;
                confetti.style.animation = `confettiRain ${animationDuration}s ease-out ${animationDelay}s forwards`;
            });
        }, []);
        
        return (
            <div className="overlay overflow-hidden animated-gradient-bg">
                <div className="text-center text-white relative z-10">
                    <h1 className="text-5xl md:text-7xl font-display font-bold" style={{ animation: `slideInDown .8s ease-out`}}>Welcome, {name}!</h1>
                    <p className="mt-4 text-xl" style={{ animation: `fadeIn 1s .5s ease-out backwards` }}>We're so glad you're here.</p>
                </div>
                {Array.from({length: 10}).map((_, i) => (
                    <div key={i} className="confetti"></div>
                ))}
            </div>
        );
    };

    const CertificateModal = ({ name, onContinue }) => { 
    const certificateRef = useRef(null); 
    const [downloading, setDownloading] = useState(false); 
    
    const handleDownload = async () => { 
        if (certificateRef.current && !downloading && window.html2canvas) { 
            setDownloading(true); 
            try { 
                const canvas = await html2canvas(certificateRef.current, { 
                    scale: 2, 
                    useCORS: true, 
                    backgroundColor: '#fdfdfd',
                    logging: false
                }); 
                const link = document.createElement('a'); 
                link.href = canvas.toDataURL('image/png'); 
                link.download = `Ganesh_Dai_Academy_Certificate_${name}.png`; 
                document.body.appendChild(link);
                link.click(); 
                document.body.removeChild(link);
            } catch (error) { 
                console.error("Download failed:", error); 
                alert("Download failed. Please try again.");
            } finally { 
                setDownloading(false); 
            } 
        } else if (!window.html2canvas) {
            alert("Download feature is not available right now. Please try again later.");
        }
    }; 
    
    return (
        <div className="overlay">
            <div className="w-full max-w-4xl bg-white dark:bg-slate-900 rounded-xl max-h-[90vh] flex flex-col slide-in-up" onClick={e=>e.stopPropagation()}>
                <div className="p-4 sm:p-6 overflow-y-auto">
                    <div ref={certificateRef} id="certificate" className="text-slate-800 bg-white p-8 rounded-lg">
                        <div className="text-center border-4 border-gold-500 p-8 bg-gradient-to-b from-white to-amber-50">
                            <img src={DATA.logoUrl} className="w-24 h-24 mx-auto mb-4 rounded-full border-4 border-amber-400" alt="Academy Logo"/>
                            <h1 className="font-serif text-4xl text-amber-600 mb-6">Certificate of Membership</h1>
                            <div className="my-8 border-t-2 border-b-2 border-amber-300 py-6">
                                <p className="text-lg text-slate-600 mb-4">This certificate is proudly presented to</p>
                                <p className="font-handwriting text-6xl font-bold text-slate-800 my-6" style={{color: '#1f2937'}}>
                                    {name}
                                </p>
                                <p className="text-lg text-slate-600 max-w-2xl mx-auto">
                                    for joining the Ganesh Dai Academy. We wish you the very best for your 
                                    academic journey and future endeavors.
                                </p>
                            </div>
                            <div className="mt-8 flex justify-between items-end">
                                <div className="text-left">
                                    <div className="border-t-2 border-slate-400 pt-2">
                                        <p className="font-semibold" style={{color: '#1f2937'}}>{new Date().toLocaleDateString('en-CA')}</p>
                                        <p className="text-sm text-slate-500">Date</p>
                                    </div>
                                </div>
                                <div className="text-center">
                                    <div className="mb-2">
                                        <img src={DATA.logoUrl} className="w-16 h-16 mx-auto rounded-full" alt="Signature"/>
                                    </div>
                                    <div className="border-t-2 border-slate-400 pt-2">
                                        <p className="font-handwriting text-2xl text-amber-600">Ganesh Dahal</p>
                                        <p className="text-sm text-slate-500">Founder, Ganesh Dai Academy</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div className="flex flex-col sm:flex-row gap-3 p-4 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 rounded-b-xl">
                    <button 
                        onClick={handleDownload} 
                        disabled={downloading}
                        className="flex-1 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white px-6 py-3 rounded-lg font-semibold flex items-center justify-center transition-all disabled:opacity-70 disabled:cursor-not-allowed touch-target shadow-lg"
                    >
                        {downloading ? (
                            <>
                                <i className="fa-solid fa-spinner spinner mr-2"></i> 
                                Downloading...
                            </>
                        ) : (
                            <>
                                <i className="fa-solid fa-download mr-2"></i>
                                Download Certificate
                            </>
                        )}
                    </button>
                    <button 
                        onClick={onContinue} 
                        className="flex-1 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white px-6 py-3 rounded-lg font-semibold flex items-center justify-center transition-all touch-target shadow-lg"
                    >
                        Continue to Academy 
                        <i className="fa-solid fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </div>
    ); 
};
    
    const AskQuestionFAB = () => ( 
      <a href={`https://wa.me/${DATA.whatsapp.number}?text=${encodeURIComponent(DATA.whatsapp.message)}`} target="_blank" rel="noopener noreferrer" className="fixed bottom-6 right-6 z-50 h-16 w-16 bg-gradient-to-tr from-emerald-500 to-green-500 rounded-full shadow-lg grid place-items-center text-white text-3xl transition-transform hover:scale-110 active:scale-95">
        <i className="fa-brands fa-whatsapp"></i>
      </a> 
    );
    
    // Enhanced PDF Viewer Modal
    const PdfViewerModal = ({ pdfInfo, onClose, isPremium, onUpgradeRequest }) => { 
      if (!pdfInfo || !pdfInfo.link) return null; 
      
      const [isLoading, setIsLoading] = useState(true); 
      const viewerRef = useRef(null); 
      const pdfId = useMemo(() => pdfInfo.title.replace(/\s+/g, '_'), [pdfInfo]); 
      const [progressPage, setProgressPage] = useState(''); 
      const [savedPage, setSavedPage] = useState(null); 
      const [showSavedConfirmation, setShowSavedConfirmation] = useState(false);
      const [isFullscreen, setIsFullscreen] = useState(false);

      const getEmbedUrl = useCallback((url, page) => { 
        const fileIdMatch = url.match(/drive\.google\.com\/(?:file\/d\/|drive\/folders\/)([a-zA-Z0-9_-]+)/); 
        if (!fileIdMatch) return null; 
        let embedUrl = `https://drive.google.com/file/d/${fileIdMatch[1]}/preview`; 
        if (page) { embedUrl += `#page=${page}`; } 
        return embedUrl; 
      }, []); 

      useEffect(() => { 
        const savedPageData = localStorage.getItem(`pdfProgress_${pdfId}`); 
        if (savedPageData) { setSavedPage(savedPageData); setProgressPage(savedPageData); } 
      }, [pdfId]); 

      const handleSaveProgress = (e) => { 
        e.preventDefault(); 
        localStorage.setItem(`pdfProgress_${pdfId}`, progressPage); 
        setSavedPage(progressPage); 
        setShowSavedConfirmation(true); 
        setTimeout(() => setShowSavedConfirmation(false), 2500); 
      }; 

      const handleFullscreen = () => {
        if (!document.fullscreenElement) {
          viewerRef.current.requestFullscreen().then(() => {
            setIsFullscreen(true);
          }).catch(err => {
            console.error(`Error attempting to enable full-screen mode: ${err.message}`);
          });
        } else {
          document.exitFullscreen().then(() => {
            setIsFullscreen(false);
          });
        }
      };

      const handlePdfLoad = () => {
        setIsLoading(false);
      };

      const preventContextMenu = (e) => e.preventDefault(); 

      const iframeUrl = useMemo(() => getEmbedUrl(pdfInfo.link, savedPage), [pdfInfo.link, savedPage, getEmbedUrl]); 
      
      // Check if content is premium and user doesn't have access
      if (pdfInfo.isPremium && !isPremium) {
        return (
          <div className="overlay">
            <div className="modal-box bg-slate-900 text-white">
              <div className="p-8 bg-gradient-to-br from-blue-500 to-violet-600 text-center">
                <i className="fas fa-gem text-5xl mb-3 text-yellow-300"></i>
                <h2 className="text-3xl font-extrabold font-display">Premium Content</h2>
                <p className="text-white/80 mt-1">This content is available for premium users only.</p>
              </div>
              <div className="p-8 text-center">
                <p className="text-white/80 mb-6">Upgrade to premium to access all study materials, notes, and quizzes.</p>
                <button onClick={onUpgradeRequest} className="btn-grad font-bold py-3 px-8 rounded-full shadow-lg text-lg">
                  Upgrade Now
                </button>
                <button onClick={onClose} className="text-slate-400 hover:text-white text-sm w-full mt-4">
                  Maybe Later
                </button>
              </div>
            </div>
          </div>
        );
      }
      
      return ( 
        <div className="overlay" onClick={onClose} onContextMenu={preventContextMenu}> 
          <div ref={viewerRef} className={`pdf-viewer-modal bg-slate-900 border border-slate-700 animate-popIn ${isFullscreen ? 'fixed inset-0 z-[2000]' : ''}`} onClick={e => e.stopPropagation()}> 
            <div className="header flex-shrink-0"> 
              <h3 className="truncate pr-4 text-white">{pdfInfo.title}</h3> 
              <div className="flex items-center gap-2"> 
                <form onSubmit={handleSaveProgress} className="hidden sm:flex items-center gap-2 relative"> 
                  <label htmlFor="page-input" className="text-sm text-slate-400">Bookmark Page:</label> 
                  <input id="page-input" type="number" value={progressPage} onChange={(e) => setProgressPage(e.target.value)} className="bg-slate-700 rounded-md px-2 py-1 w-20 text-center text-white placeholder-slate-400" placeholder="#" required /> 
                  <button type="submit" className="bg-indigo-600 hover:bg-indigo-700 text-white font-bold text-sm py-1 px-3 rounded-md">Save</button> 
                  {showSavedConfirmation && <div className="absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full shadow-lg animate-popIn">Saved!</div>} 
                </form> 
                <button onClick={handleFullscreen} title="Fullscreen" className="bg-white/10 hover:bg-white/20 text-white rounded-full w-8 h-8 flex items-center justify-center"> 
                  <i className="fas fa-expand"></i> 
                </button> 
                <button onClick={onClose} title="Close" className="close-button text-xl text-white">&times;</button> 
              </div> 
            </div> 
            <div className="relative flex-grow bg-gray-800"> 
              {isLoading && ( 
                <div className="absolute inset-0 flex flex-col justify-center items-center text-white bg-gray-800/90 backdrop-blur-sm z-10 p-4 text-center"> 
                  <i className="fas fa-spinner fa-spin text-4xl mb-6"></i> 
                  <p className="font-bold text-lg">Loading HD Document...</p> 
                  {savedPage && <p className="text-sm text-gray-400 mt-2">Jumping to your bookmark on page {savedPage}...</p>} 
                  <div className="mt-8 bg-indigo-900/50 border border-indigo-500 rounded-lg p-4 max-w-md"> 
                    <h4 className="font-semibold text-indigo-300 flex items-center justify-center gap-2"><i className="fas fa-info-circle"></i> Heads Up!</h4> 
                    <p className="text-slate-300 text-sm mt-2"> To <strong>zoom</strong>, print, or go to a page, move your cursor to the <strong>top-right corner</strong> of the document viewer. A toolbar will appear. </p> 
                  </div> 
                </div> 
              )} 
              <iframe 
                src={iframeUrl} 
                onLoad={handlePdfLoad}
                className={`w-full h-full border-0 transition-opacity duration-500 ${isLoading ? 'opacity-0' : 'opacity-100'}`} 
                title="HD PDF Viewer" 
                sandbox="allow-scripts allow-same-origin allow-forms"
              ></iframe> 
            </div> 
          </div> 
        </div> 
      ); 
    };
    
    const PaymentModal = ({ onPaymentSuccess, onClose, userName }) => { 
  const [premiumCode, setPremiumCode] = useState(''); 
  const [isLoading, setIsLoading] = useState(false); 
  const [error, setError] = useState('');

  const handleVerify = (e) => { 
    e.preventDefault(); 
    setError(''); 
    const expectedCode = generatePremiumCode(userName); 
    if (premiumCode === expectedCode) { 
      setIsLoading(true); 
      setTimeout(() => { setIsLoading(false); onPaymentSuccess(); }, 1500); 
    } else { 
      setError('Invalid code. Please check and try again.'); 
    } 
  };

  return ( 
    <div className="fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-start justify-center p-4 overflow-y-auto">
      <div className="w-full max-w-md bg-gradient-to-b from-slate-900 to-purple-900 rounded-3xl shadow-2xl border border-purple-500/30 my-8">
        
        {/* Header with Price - Fixed */}
        <div className="relative p-8 text-center bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-700 sticky top-0 z-10">
          <button onClick={onClose} className="absolute top-6 right-6 w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-all duration-300 hover:scale-110">
            <i className="fas fa-times text-white"></i>
          </button>
          
          <div className="w-24 h-24 bg-gradient-to-br from-yellow-400 via-amber-500 to-orange-500 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-2xl">
            <i className="fas fa-crown text-white text-3xl"></i>
          </div>
          
          <h2 className="text-3xl font-bold text-white mb-4">UPGRADE TO PREMIUM</h2>
          
          {/* Price Comparison */}
          <div className="flex items-center justify-center gap-6 mb-2">
            <div className="text-center">
              <div className="text-white/60 text-sm line-through mb-1">Regular</div>
              <div className="text-2xl text-white/40 line-through">Rs 499</div>
            </div>
            <div className="text-center relative">
              <div className="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white text-xs px-3 py-1 rounded-full animate-pulse">
                60% OFF
              </div>
              <div className="text-white/80 text-sm mb-1">Today Only</div>
              <div className="text-4xl font-bold text-yellow-300">Rs 199</div>
            </div>
          </div>
        </div>

        {/* Scrollable Content */}
        <div className="p-6 space-y-6 max-h-[60vh] overflow-y-auto">
          
          {/* Benefits */}
          <div className="space-y-3">
            <h3 className="text-white text-xl font-bold text-center mb-4 flex items-center justify-center gap-2">
              <i className="fas fa-gem text-yellow-400"></i>
              Premium Benefits
            </h3>
            {DATA.payment.premiumFeatures.map((feature, index) => (
              <div key={index} className="flex items-center gap-4 p-4 bg-white/5 rounded-2xl border border-white/10 hover:bg-white/10 transition-all duration-300">
                <div className="w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center flex-shrink-0">
                  <i className="fas fa-check text-white text-sm"></i>
                </div>
                <span className="text-white/90 font-medium text-sm">{feature}</span>
              </div>
            ))}
          </div>

          {/* Payment Steps */}
          <div className="space-y-4">
            
            {/* Step 1 */}
            <div className="bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-2xl p-5 border border-blue-500/20">
              <div className="flex items-center gap-4 mb-4">
                <div className="w-12 h-12 bg-blue-500 rounded-2xl flex items-center justify-center text-white font-bold text-lg">1</div>
                <div>
                  <h4 className="text-white font-bold text-lg">Make Payment</h4>
                  <p className="text-white/70 text-sm">Send Rs 199 via eSewa</p>
                </div>
              </div>
              <div className="space-y-3">
                <div className="bg-black/30 rounded-xl p-4 border border-white/10">
                  <p className="text-white/60 text-sm mb-2 text-center">Send to eSewa ID:</p>
                  <div className="flex items-center justify-between bg-white/5 rounded-lg p-3">
                    <span className="text-white font-mono text-lg">{DATA.payment.esewaId}</span>
                    <button onClick={() => navigator.clipboard.writeText(DATA.payment.esewaId)} className="text-white/60 hover:text-white transition-all duration-300">
                      <i className="fas fa-copy"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            {/* Step 2 */}
            <div className="bg-gradient-to-r from-green-500/10 to-emerald-500/10 rounded-2xl p-5 border border-green-500/20">
              <div className="flex items-center gap-4 mb-4">
                <div className="w-12 h-12 bg-green-500 rounded-2xl flex items-center justify-center text-white font-bold text-lg">2</div>
                <div>
                  <h4 className="text-white font-bold text-lg">Get Code</h4>
                  <p className="text-white/70 text-sm">Contact us on WhatsApp</p>
                </div>
              </div>
              <a href={DATA.payment.whatsAppContactLink} target="_blank" className="w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 flex items-center justify-center gap-3">
                <i className="fab fa-whatsapp text-xl"></i>
                Contact for Code
              </a>
            </div>

            {/* Step 3 */}
            <div className="bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-2xl p-5 border border-purple-500/20">
              <div className="flex items-center gap-4 mb-4">
                <div className="w-12 h-12 bg-purple-500 rounded-2xl flex items-center justify-center text-white font-bold text-lg">3</div>
                <div>
                  <h4 className="text-white font-bold text-lg">Activate</h4>
                  <p className="text-white/70 text-sm">Enter code to unlock</p>
                </div>
              </div>
              
              <form onSubmit={handleVerify} className="space-y-4">
                <input 
                  type="text" 
                  value={premiumCode} 
                  onChange={(e) => setPremiumCode(e.target.value)} 
                  placeholder="Enter premium code..." 
                  className="w-full p-4 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                  required 
                />
                
                {error && (
                  <div className="flex items-center gap-3 p-3 bg-red-500/20 border border-red-500/30 rounded-xl">
                    <i className="fas fa-exclamation-triangle text-red-400"></i>
                    <span className="text-red-300 text-sm">{error}</span>
                  </div>
                )}

                <button 
                  type="submit" 
                  disabled={isLoading}
                  className="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3"
                >
                  {isLoading ? (
                    <>
                      <i className="fas fa-spinner fa-spin"></i>
                      Activating...
                    </>
                  ) : (
                    <>
                      <i className="fas fa-crown"></i>
                      Activate Premium
                    </>
                  )}
                </button>
              </form>
            </div>
          </div>

          {/* Trust Section */}
          <div className="text-center">
            <p className="text-white/60 text-sm mb-4">Trusted by 1000+ students</p>
            <div className="grid grid-cols-4 gap-2">
              <div className="text-center p-2">
                <i className="fas fa-shield-alt text-green-400 text-lg mb-1"></i>
                <p className="text-white/60 text-xs">Secure</p>
              </div>
              <div className="text-center p-2">
                <i className="fas fa-bolt text-yellow-400 text-lg mb-1"></i>
                <p className="text-white/60 text-xs">Instant</p>
              </div>
              <div className="text-center p-2">
                <i className="fas fa-headset text-blue-400 text-lg mb-1"></i>
                <p className="text-white/60 text-xs">Support</p>
              </div>
              <div className="text-center p-2">
                <i className="fas fa-infinity text-purple-400 text-lg mb-1"></i>
                <p className="text-white/60 text-xs">Lifetime</p>
              </div>
            </div>
          </div>
        </div>

        {/* Footer */}
        <div className="p-4 border-t border-white/10 text-center sticky bottom-0 bg-slate-900">
          <button onClick={onClose} className="text-white/60 hover:text-white/80 transition-colors text-sm">
            Maybe later
          </button>
        </div>
      </div>
    </div> 
  ); 
};
    
    const Header = ({ active, setActive, isDark, toggleTheme, onSearchClick, isPremium, onUpgradeClick }) => { 
      const [menuOpen, setMenuOpen] = useState(false); 
      
      const navigate = (tab) => { 
        setActive(tab); 
        setMenuOpen(false); 
      }; 
      
      const NavItem = ({ name, label, icon }) => (
        <button onClick={()=>navigate(name)} className={classNames("px-3 py-2 rounded-md font-medium flex items-center gap-2 transition-colors w-full text-left lg:w-auto", active === name ? "text-primary-500 dark:text-blue-300 bg-blue-100 dark:bg-blue-900/40" : "text-slate-600 dark:text-slate-300 hover:bg-slate-200/70 dark:hover:bg-slate-800/60")}>
          <i className={`${icon} w-5 text-center`}></i> {label}
        </button>
      ); 
      
      const navItems = [ 
        { name: 'home', label: 'Dashboard', icon: 'fa-solid fa-table-columns' }, 
        { name: 'notes', label: 'Notes', icon: 'fa-solid fa-book-open' }, 
        { name: 'library', label: 'Library', icon: 'fa-solid fa-swatchbook' }, 
        { name: 'prep', label: 'SEE Prep', icon: 'fa-solid fa-graduation-cap' }, 
        { name: 'quizzes', label: 'Quizzes', icon: 'fa-solid fa-lightbulb' }, 
        { name: 'videos', label: 'Videos', icon: 'fa-solid fa-video' }, 
        { name: 'aftersee', label: 'After SEE', icon: 'fa-solid fa-rocket' }, 
        { name: 'about', label: 'About', icon: 'fa-solid fa-info-circle' }, 
      ]; 
      
      return (
        <header className="sticky top-0 z-40 border-b border-slate-200/80 dark:border-slate-800/80 backdrop-blur-lg bg-white/80 dark:bg-slate-900/70">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="py-3 flex items-center justify-between">
              <div className="flex items-center gap-3 cursor-pointer" onClick={() => navigate('home')}>
                <img src={DATA.logoUrl} alt="Logo" className="h-10 w-10 rounded-lg"/>
                <div>
                  <div className="font-display font-semibold text-slate-900 dark:text-white text-lg leading-tight">{DATA.name}</div>
                  <div className="text-xs text-slate-500">{DATA.subtitle}</div>
                </div>
              </div>
              <nav className="hidden lg:flex items-center gap-1">
                {navItems.map(item => <NavItem key={item.name} {...item}/>)}
              </nav>
              <div className="flex items-center gap-2">
                {!isPremium && (
                  <button onClick={onUpgradeClick} className="hidden md:flex items-center gap-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-2 rounded-lg font-semibold text-sm hover:shadow-lg transition-all">
                    <i className="fas fa-crown"></i> Upgrade
                  </button>
                )}
                {isPremium && (
                  <span className="hidden md:flex items-center gap-2 bg-gradient-to-r from-purple-500 to-indigo-500 text-white px-4 py-2 rounded-lg font-semibold text-sm">
                    <i className="fas fa-crown"></i> Premium
                  </span>
                )}
                <button onClick={onSearchClick} className="h-10 w-10 grid place-items-center rounded-lg border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300" aria-label="Search">
                  <i className="fa-solid fa-search"></i>
                </button>
                <button onClick={toggleTheme} className="h-10 w-10 grid place-items-center rounded-lg border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300" aria-label={`Switch to ${isDark ? 'light' : 'dark'} mode`}>
                  <i className={isDark ? "fa-solid fa-moon text-yellow-300" : "fa-regular fa-sun text-orange-400"}></i>
                </button>
                <button onClick={() => setMenuOpen(o => !o)} className="lg:hidden h-10 w-10 grid place-items-center rounded-lg border border-slate-200 dark:border-slate-800">
                  <i className={`fa-solid ${menuOpen ? 'fa-times' : 'fa-bars'}`}></i>
                </button>
              </div>
            </div>
            {menuOpen && (
              <nav className="lg:hidden py-4 border-t border-slate-200 dark:border-slate-800 flex flex-col gap-2">
                {navItems.map(item => <NavItem key={item.name} {...item}/>)}
                {!isPremium && (
                  <button onClick={onUpgradeClick} className="flex items-center gap-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-2 rounded-lg font-semibold text-sm hover:shadow-lg transition-all w-full justify-center mt-2">
                    <i className="fas fa-crown"></i> Upgrade to Premium
                  </button>
                )}
              </nav>
            )}
          </div>
        </header>
      ); 
    };
    
    const Footer = ({ go }) => (
      <footer className="border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/80 backdrop-blur-sm">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-sm text-slate-500">
          <div className="flex flex-col md:flex-row items-center justify-between gap-6">
            <div>© {new Date().getFullYear()} {DATA.name} • Your SEE Success Partner</div>
            <div className="flex items-center gap-6">
              <button onClick={() => go('about')} className="hover:text-primary-500 transition-colors">About Us</button>
              <a href={DATA.social.youtube} target="_blank" rel="noopener noreferrer" className="hover:text-red-500 transition-colors text-xl" aria-label="YouTube">
                <i className="fa-brands fa-youtube"></i>
              </a>
              <a href={DATA.social.facebook} target="_blank" rel="noopener noreferrer" className="hover:text-blue-600 transition-colors text-xl" aria-label="Facebook">
                <i className="fa-brands fa-facebook"></i>
              </a>
            </div>
          </div>
        </div>
      </footer>
    );
    
    // --- PAGE COMPONENTS ---
    
    // Study Timer Component
    const StudyTimer = () => {
      const [time, setTime] = useState(0);
      const [isActive, setIsActive] = useState(false);
      const [studyGoal, setStudyGoal] = useState(60); // 60 minutes default goal
      const [sessionComplete, setSessionComplete] = useState(false);
      
      useEffect(() => {
        let interval = null;
        
        if (isActive) {
          interval = setInterval(() => {
            setTime(time => {
              if (time >= studyGoal * 60) {
                setIsActive(false);
                setSessionComplete(true);
                return studyGoal * 60;
              }
              return time + 1;
            });
          }, 1000);
        } else if (!isActive && time !== 0) {
          clearInterval(interval);
        }
        
        return () => clearInterval(interval);
      }, [isActive, time, studyGoal]);
      
      const formatTime = (seconds) => {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
      };
      
      const progress = (time / (studyGoal * 60)) * 100;
      const radius = 70;
      const circumference = 2 * Math.PI * radius;
      const strokeDashoffset = circumference - (progress / 100) * circumference;
      
      const resetTimer = () => {
        setTime(0);
        setIsActive(false);
        setSessionComplete(false);
      };
      
      return (
        <div className="card p-6 text-center">
          <h3 className="font-display text-xl font-semibold text-slate-800 dark:text-white mb-4">Study Timer</h3>
          
          <div className="relative w-48 h-48 mx-auto mb-6">
            <svg className="w-full h-full" viewBox="0 0 160 160">
              <circle
                cx="80"
                cy="80"
                r={radius}
                fill="none"
                stroke="#e2e8f0"
                strokeWidth="12"
              />
              <circle
                cx="80"
                cy="80"
                r={radius}
                fill="none"
                stroke="#3b82f6"
                strokeWidth="12"
                strokeDasharray={circumference}
                strokeDashoffset={strokeDashoffset}
                strokeLinecap="round"
                transform="rotate(-90 80 80)"
              />
            </svg>
            <div className="absolute inset-0 flex flex-col items-center justify-center">
              <div className="text-3xl font-bold text-slate-800 dark:text-white">{formatTime(time)}</div>
              <div className="text-sm text-slate-500 dark:text-slate-400 mt-1">of {studyGoal} min goal</div>
            </div>
          </div>
          
          {sessionComplete && (
            <div className="mb-4 p-3 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 rounded-lg">
              <i className="fas fa-check-circle mr-2"></i>
              Study session complete! Great job!
            </div>
          )}
          
          <div className="flex flex-col sm:flex-row gap-3 justify-center">
            {!isActive && time === 0 && (
              <div className="flex-1">
                <label className="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Study Goal (minutes)</label>
                <input 
                  type="number" 
                  value={studyGoal} 
                  onChange={(e) => setStudyGoal(parseInt(e.target.value) || 60)}
                  className="w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200"
                  min="1"
                  max="240"
                />
              </div>
            )}
            
            <div className="flex gap-2">
              <button
                onClick={() => setIsActive(!isActive)}
                className={`px-4 py-2 rounded-lg font-semibold ${isActive ? 'bg-red-500 hover:bg-red-600 text-white' : 'bg-green-500 hover:bg-green-600 text-white'}`}
              >
                {isActive ? <><i className="fas fa-pause mr-1"></i> Pause</> : <><i className="fas fa-play mr-1"></i> Start</>}
              </button>
              
              {(time > 0 || sessionComplete) && (
                <button
                  onClick={resetTimer}
                  className="px-4 py-2 bg-slate-500 hover:bg-slate-600 text-white rounded-lg font-semibold"
                >
                  <i className="fas fa-redo mr-1"></i> Reset
                </button>
              )}
            </div>
          </div>
        </div>
      );
    };
    
    // Brain Teaser Component
    const BrainTeaser = () => {
      const [currentTeaser, setCurrentTeaser] = useState(0);
      const [showAnswer, setShowAnswer] = useState(false);
      const [userAnswer, setUserAnswer] = useState('');
      const [answered, setAnswered] = useState(false);
      
      const checkAnswer = () => {
        setAnswered(true);
        setShowAnswer(true);
      };
      
      const nextTeaser = () => {
        setCurrentTeaser((prev) => (prev + 1) % DATA.brainTeasers.length);
        setShowAnswer(false);
        setUserAnswer('');
        setAnswered(false);
      };
      
      return (
        <div className="card p-6">
          <h3 className="font-display text-xl font-semibold text-slate-800 dark:text-white mb-4 flex items-center">
            <i className="fas fa-brain text-purple-500 mr-2"></i> Brain Teaser
          </h3>
          
          <div className="mb-4">
            <p className="text-slate-700 dark:text-slate-300 text-lg font-medium mb-4">
              {DATA.brainTeasers[currentTeaser].question}
            </p>
            
            {!answered ? (
              <div className="space-y-4">
                <input
                  type="text"
                  value={userAnswer}
                  onChange={(e) => setUserAnswer(e.target.value)}
                  placeholder="Type your answer here..."
                  className="w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200"
                />
                <button
                  onClick={checkAnswer}
                  className="w-full bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-semibold"
                >
                  Check Answer
                </button>
              </div>
            ) : (
              <div className="space-y-4">
                <div className={`p-3 rounded-lg ${userAnswer.toLowerCase() === DATA.brainTeasers[currentTeaser].answer.toLowerCase() ? 'bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300' : 'bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300'}`}>
                  <p className="font-semibold">
                    {userAnswer.toLowerCase() === DATA.brainTeasers[currentTeaser].answer.toLowerCase() 
                      ? '🎉 Correct! Well done!' 
                      : 'Not quite right. The answer is:'}
                  </p>
                  {userAnswer.toLowerCase() !== DATA.brainTeasers[currentTeaser].answer.toLowerCase() && (
                    <p className="mt-2">{DATA.brainTeasers[currentTeaser].answer}</p>
                  )}
                </div>
                <button
                  onClick={nextTeaser}
                  className="w-full bg-slate-500 hover:bg-slate-600 text-white py-3 rounded-lg font-semibold"
                >
                  Next Teaser
                </button>
              </div>
            )}
          </div>
        </div>
      );
    };
    
    // Motivational Quote Component
    const MotivationalQuote = () => {
      const [currentQuote, setCurrentQuote] = useState(0);
      
      useEffect(() => {
        const interval = setInterval(() => {
          setCurrentQuote((prev) => (prev + 1) % DATA.motivationalQuotes.length);
        }, 10000); // Change quote every 10 seconds
        return () => clearInterval(interval);
      }, []);
      
      return (
        <div className="card p-6 bg-gradient-to-br from-indigo-500 to-purple-600 text-white">
          <h3 className="font-display text-xl font-semibold mb-4 flex items-center">
            <i className="fas fa-quote-left mr-2"></i> Motivation
          </h3>
          
          <p className="text-lg italic mb-2">
            "{DATA.motivationalQuotes[currentQuote]}"
          </p>
          
          <div className="flex justify-between items-center mt-4">
            <div className="flex">
              {DATA.motivationalQuotes.map((_, index) => (
                <div
                  key={index}
                  className={`w-2 h-2 rounded-full mx-1 ${index === currentQuote ? 'bg-white' : 'bg-white/50'}`}
                ></div>
              ))}
            </div>
            <button
              onClick={() => setCurrentQuote((prev) => (prev + 1) % DATA.motivationalQuotes.length)}
              className="bg-white/20 hover:bg-white/30 text-white p-2 rounded-full"
            >
              <i className="fas fa-chevron-right"></i>
            </button>
          </div>
        </div>
      );
    };
    
    // Achievement Badge Component
    const AchievementBadge = ({ achievement, unlocked }) => {
      return (
        <div className={`flex items-center p-3 rounded-lg ${unlocked ? 'bg-white dark:bg-slate-800 shadow' : 'bg-slate-100 dark:bg-slate-800/50 opacity-70'}`}>
          <div className={`h-12 w-12 rounded-full flex items-center justify-center text-white ${unlocked ? `badge-${achievement.badge}` : 'bg-slate-400'}`}>
            <i className={achievement.icon}></i>
          </div>
          <div className="ml-3 flex-1">
            <h4 className={`font-semibold ${unlocked ? 'text-slate-800 dark:text-white' : 'text-slate-500'}`}>
              {achievement.name}
            </h4>
            <p className="text-sm text-slate-500 dark:text-slate-400">
              {achievement.description}
            </p>
          </div>
          {unlocked && (
            <div className="text-right">
              <div className="text-xs font-semibold text-amber-600 dark:text-amber-400">
                +{achievement.points} pts
              </div>
            </div>
          )}
        </div>
      );
    };
    
    // Progress Tracking Component
    const ProgressTracking = ({ userStats }) => {
      const { notesRead = 0, quizzesCompleted = 0, studyTime = 0, achievementsUnlocked = 0 } = userStats;
      
      const progressItems = [
        { label: 'Notes Read', value: notesRead, goal: 20, color: 'bg-blue-500' },
        { label: 'Quizzes Completed', value: quizzesCompleted, goal: 10, color: 'bg-green-500' },
        { label: 'Study Time (hrs)', value: Math.round(studyTime / 60), goal: 10, color: 'bg-purple-500' },
        { label: 'Achievements', value: achievementsUnlocked, goal: DATA.achievements.length, color: 'bg-amber-500' },
      ];
      
      return (
        <div className="card p-6">
          <h3 className="font-display text-xl font-semibold text-slate-800 dark:text-white mb-4">Your Progress</h3>
          
          <div className="space-y-4">
            {progressItems.map((item, index) => {
              const percentage = Math.min(100, (item.value / item.goal) * 100);
              
              return (
                <div key={index}>
                  <div className="flex justify-between text-sm mb-1">
                    <span className="text-slate-700 dark:text-slate-300">{item.label}</span>
                    <span className="text-slate-600 dark:text-slate-400">{item.value} / {item.goal}</span>
                  </div>
                  <div className="progress-bar">
                    <div 
                      className={`progress-bar-fill ${item.color}`}
                      style={{ width: `${percentage}%` }}
                    ></div>
                  </div>
                </div>
              );
            })}
          </div>
        </div>
      );
    };
    
    // Enhanced Modern Dashboard
    const Dashboard = ({ userName, go, isPremium, onUpgradeClick, userStats }) => { 
      const [activeTab, setActiveTab] = useState('overview');
      
      return (
        <> 
          {/* Hero Section */}
          <div className="relative overflow-hidden bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700">
            {/* Animated Background Elements */}
            <div className="absolute top-10 left-10 w-72 h-72 bg-teal-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float"></div>
            <div className="absolute top-20 right-20 w-96 h-96 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float animation-delay-2000"></div>
            <div className="absolute bottom-20 left-1/3 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float animation-delay-4000"></div>
            
            <div className="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 md:py-32 text-center text-white">
              <div className="inline-block relative mb-8">
                <div className="absolute -inset-4 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl blur-2xl opacity-30 animate-pulse"></div>
                <div className="relative bg-white/10 backdrop-blur-xl rounded-2xl px-8 py-6 shadow-2xl border border-white/20">
                  <h1 className="text-4xl md:text-6xl font-display font-bold mb-4">Welcome back, {userName}!</h1>
                  <p className="text-white/90 md:text-xl max-w-3xl mx-auto">
                    Your journey to SEE success continues here. Let's make today count.
                  </p>
                </div>
              </div>
              
              {!isPremium && (
                <button 
                  onClick={onUpgradeClick}
                  className="mt-8 bg-gradient-to-r from-amber-500 to-orange-500 text-white px-8 py-4 rounded-full font-bold text-lg shadow-2xl hover:shadow-3xl transition-all transform hover:scale-105"
                >
                  <i className="fas fa-crown mr-2"></i> Upgrade to Premium - Rs. 199
                </button>
              )}
            </div>
          </div>
          
          {/* Dashboard Content */}
          <Section className="py-20 -mt-20 relative z-10">
            {/* Quick Stats */}
            <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-12">
              <div className="card p-6 text-center bg-gradient-to-br from-blue-500 to-indigo-600 text-white">
                <i className="fas fa-book-open text-3xl mb-3"></i>
                <div className="text-2xl font-bold">{userStats.notesRead || 0}</div>
                <div className="text-sm opacity-90">Notes Read</div>
              </div>
              <div className="card p-6 text-center bg-gradient-to-br from-green-500 to-emerald-600 text-white">
                <i className="fas fa-trophy text-3xl mb-3"></i>
                <div className="text-2xl font-bold">{userStats.quizzesCompleted || 0}</div>
                <div className="text-sm opacity-90">Quizzes Done</div>
              </div>
              <div className="card p-6 text-center bg-gradient-to-br from-purple-500 to-pink-600 text-white">
                <i className="fas fa-clock text-3xl mb-3"></i>
                <div className="text-2xl font-bold">{Math.round(userStats.studyTime / 60) || 0}</div>
                <div className="text-sm opacity-90">Study Hours</div>
              </div>
              <div className="card p-6 text-center bg-gradient-to-br from-amber-500 to-orange-600 text-white">
                <i className="fas fa-star text-3xl mb-3"></i>
                <div className="text-2xl font-bold">{userStats.achievementsUnlocked || 0}</div>
                <div className="text-sm opacity-90">Achievements</div>
              </div>
            </div>
            
            {/* Main Dashboard Grid */}
            <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
              {/* Left Column */}
              <div className="lg:col-span-2 space-y-8">
                {/* Quick Actions */}
                <div className="card p-6">
                  <h3 className="font-display text-xl font-semibold text-slate-800 dark:text-white mb-6">Quick Actions</h3>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <button 
                      onClick={() => go('notes')}
                      className="p-4 bg-gradient-to-br from-blue-500 to-indigo-600 text-white rounded-xl text-center hover:scale-105 transition-transform"
                    >
                      <i className="fas fa-book-open text-2xl mb-2"></i>
                      <div className="text-sm font-semibold">Notes</div>
                    </button>
                    <button 
                      onClick={() => go('quizzes')}
                      className="p-4 bg-gradient-to-br from-green-500 to-emerald-600 text-white rounded-xl text-center hover:scale-105 transition-transform"
                    >
                      <i className="fas fa-lightbulb text-2xl mb-2"></i>
                      <div className="text-sm font-semibold">Quizzes</div>
                    </button>
                    <button 
                      onClick={() => go('prep')}
                      className="p-4 bg-gradient-to-br from-purple-500 to-pink-600 text-white rounded-xl text-center hover:scale-105 transition-transform"
                    >
                      <i className="fas fa-graduation-cap text-2xl mb-2"></i>
                      <div className="text-sm font-semibold">SEE Prep</div>
                    </button>
                    <button 
                      onClick={() => go('library')}
                      className="p-4 bg-gradient-to-br from-amber-500 to-orange-600 text-white rounded-xl text-center hover:scale-105 transition-transform"
                    >
                      <i className="fas fa-swatchbook text-2xl mb-2"></i>
                      <div className="text-sm font-semibold">Library</div>
                    </button>
                  </div>
                </div>
                
                {/* Study Progress */}
                <ProgressTracking userStats={userStats} />
              </div>
              
              {/* Right Column */}
              <div className="space-y-8">
                <StudyTimer />
                <BrainTeaser />
                <MotivationalQuote />
              </div>
            </div>
            
            {/* Recent Achievements */}
            <div className="mt-12">
              <div className="card p-6">
                <h3 className="font-display text-xl font-semibold text-slate-800 dark:text-white mb-6">Your Achievements</h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  {DATA.achievements.map((achievement, index) => (
                    <AchievementBadge 
                      key={achievement.id} 
                      achievement={achievement} 
                      unlocked={userStats.achievementsUnlocked > index}
                    />
                  ))}
                </div>
              </div>
            </div>
          </Section>
        </>
      ); 
    };
    
    // Enhanced Modern Notes Explorer
    const NotesExplorer = ({ openFile, isPremium, onUpgradeRequest }) => { 
      const [q, setQ] = useState(""); 
      const [sub, setSub] = useState("All"); 
      const [hoveredCard, setHoveredCard] = useState(null);
      
      const list = useMemo(() => DATA.notes.filter(n => (sub === "All" || n.subject === sub) && (n.title.toLowerCase().includes(q.toLowerCase()) || n.summary.toLowerCase().includes(q.toLowerCase()))), [q, sub]); 
      
      const handleOpenFile = (note) => {
        if (note.isPremium && !isPremium) {
          onUpgradeRequest();
        } else {
          openFile(note);
        }
      };
      
      const NoteCard = ({ note, index }) => (
        <div 
          className="group relative"
          onMouseEnter={() => setHoveredCard(index)}
          onMouseLeave={() => setHoveredCard(null)}
        >
          {/* Animated Background Glow */}
          <div className={`absolute -inset-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-0 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 ${
            hoveredCard === index ? 'animate-pulse' : ''
          }`}></div>
          
          {/* Main Card */}
          <div className="relative bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-2xl border border-white/20 dark:border-slate-700/50 hover:shadow-3xl transition-all duration-500 group-hover:-translate-y-3 backdrop-blur-sm">
            {/* Floating Icon Container */}
            <div className="absolute -top-4 left-6">
              <div className="relative">
                <div className={`w-12 h-12 ${note.isPremium ? 'bg-gradient-to-br from-amber-500 to-orange-500' : 'bg-gradient-to-br from-blue-500 to-indigo-500'} rounded-2xl flex items-center justify-center shadow-2xl transform group-hover:scale-110 group-hover:rotate-12 transition-all duration-500`}>
                  <i className={`${DATA.subjectIcons[note.subject] || DATA.subjectIcons.Default} text-white text-lg`}></i>
                </div>
                {/* Floating Particles */}
                <div className="absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full opacity-0 group-hover:opacity-100 animate-ping"></div>
                <div className="absolute -bottom-1 -left-1 w-3 h-3 bg-cyan-400 rounded-full opacity-0 group-hover:opacity-100 animate-ping animation-delay-300"></div>
              </div>
            </div>

            {/* Premium Ribbon */}
            {note.isPremium && (
              <div className="absolute -top-2 -right-2">
                <div className="bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-1 rounded-full text-xs font-bold shadow-2xl flex items-center gap-1 transform group-hover:scale-110 transition-transform duration-300">
                  <i className="fas fa-bolt text-xs"></i>
                  PREMIUM
                </div>
              </div>
            )}

            {/* Content Area */}
            <div className="pt-8">
              {/* Title with Gradient Text */}
              <h3 className="font-bold text-xl text-slate-800 dark:text-white mb-3 leading-tight group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:to-purple-600 group-hover:bg-clip-text group-hover:text-transparent transition-all duration-500">
                {note.title}
              </h3>
              
              {/* Subject Badge */}
              <div className="flex items-center gap-2 mb-4">
                <span className="text-xs font-semibold bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-2 py-1 rounded-full">
                  {note.subject}
                </span>
              </div>
              
              {/* Description */}
              <p className="text-slate-600 dark:text-slate-400 text-sm leading-relaxed mb-6 line-clamp-2">
                {note.summary}
              </p>

              {/* Status Badge */}
              <div className="flex items-center gap-2 mb-6">
                {note.isPremium && !isPremium ? (
                  <div className="flex items-center gap-2 bg-amber-500/10 border border-amber-500/20 px-3 py-1 rounded-full">
                    <i className="fas fa-lock text-amber-500 text-xs"></i>
                    <span className="text-amber-600 dark:text-amber-400 text-xs font-semibold">Locked</span>
                  </div>
                ) : note.isPremium && isPremium ? (
                  <div className="flex items-center gap-2 bg-green-500/10 border border-green-500/20 px-3 py-1 rounded-full">
                    <i className="fas fa-check text-green-500 text-xs"></i>
                    <span className="text-green-600 dark:text-green-400 text-xs font-semibold">Unlocked</span>
                  </div>
                ) : (
                  <div className="flex items-center gap-2 bg-teal-500/10 border border-teal-500/20 px-3 py-1 rounded-full">
                    <i className="fas fa-unlock text-teal-500 text-xs"></i>
                    <span className="text-teal-600 dark:text-teal-400 text-xs font-semibold">Free Access</span>
                  </div>
                )}
              </div>

              {/* Action Button */}
              <div className="flex gap-3">
                {(!note.isPremium || isPremium) ? (
                  <button
                    onClick={() => handleOpenFile(note)}
                    className="flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 group/btn"
                  >
                    <i className="fas fa-eye text-sm group-hover/btn:animate-bounce"></i>
                    Open Note
                    <i className="fas fa-arrow-right text-xs transform group-hover/btn:translate-x-1 transition-transform duration-300"></i>
                  </button>
                ) : (
                  <button
                    onClick={onUpgradeRequest}
                    className="flex-1 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 group/btn"
                  >
                    <i className="fas fa-crown text-sm group-hover/btn:animate-bounce"></i>
                    Unlock Premium
                    <i className="fas fa-sparkles text-xs opacity-0 group-hover/btn:opacity-100 transition-opacity duration-300"></i>
                  </button>
                )}
              </div>
            </div>

            {/* Animated Border */}
            <div className="absolute inset-0 rounded-2xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 opacity-0 group-hover:opacity-100 transition duration-500 -z-10">
              <div className="absolute inset-[2px] rounded-2xl bg-white dark:bg-slate-800"></div>
            </div>
          </div>
        </div>
      );
      
      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-purple-50/30 dark:from-slate-900 dark:via-blue-900/10 dark:to-purple-900/10">
          {/* Animated Background Elements */}
          <div className="fixed top-10 left-10 w-72 h-72 bg-teal-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float"></div>
          <div className="fixed top-20 right-20 w-96 h-96 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float animation-delay-2000"></div>
          <div className="fixed bottom-20 left-1/3 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float animation-delay-4000"></div>

          <div className="relative z-10">
            <div className="pt-12 pb-20 px-4">
              <div className="max-w-7xl mx-auto">
                {/* Hero Header */}
                <div className="text-center mb-16">
                  {/* Animated Title Container */}
                  <div className="inline-block relative mb-8">
                    <div className="absolute -inset-4 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl blur-2xl opacity-30 animate-pulse"></div>
                    <div className="relative bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl px-8 py-6 shadow-2xl border border-white/20 dark:border-slate-700/50">
                      <h1 className="text-6xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent font-display mb-4">
                        Notes Explorer
                      </h1>
                      <p className="text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto leading-relaxed">
                        Your gateway to <span className="font-semibold text-blue-600 dark:text-blue-400">premium educational resources</span> and exclusive study materials
                      </p>
                    </div>
                  </div>

                  {/* Search and Filter */}
                  <div className="max-w-4xl mx-auto">
                    <div className="card p-6 backdrop-blur-sm bg-white/80 dark:bg-slate-800/80 border border-white/20 dark:border-slate-700/50 rounded-2xl shadow-2xl">
                      <div className="flex flex-col md:flex-row gap-4">
                        <div className="relative flex-1">
                          <i className="fa-solid fa-search absolute top-1/2 left-4 -translate-y-1/2 text-slate-400 text-lg"></i>
                          <input 
                            className="w-full pl-12 pr-4 py-4 bg-white dark:bg-slate-800 border border-blue-200 dark:border-blue-800 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-slate-800 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 shadow-lg backdrop-blur-sm text-lg" 
                            placeholder="Discover amazing notes... ✨" 
                            value={q} 
                            onChange={e => setQ(e.target.value)} 
                          />
                        </div>
                        <select 
                          className="w-full md:w-64 px-4 py-4 bg-white dark:bg-slate-800 border border-blue-200 dark:border-blue-800 rounded-xl text-slate-800 dark:text-white shadow-lg backdrop-blur-sm text-lg" 
                          value={sub} 
                          onChange={e => setSub(e.target.value)}
                        >
                          <option value="All">All Subjects</option>
                          {DATA.subjects.map(s => <option key={s} value={s}>{s}</option>)}
                        </select>
                      </div>
                    </div>
                  </div>
                </div>

                {/* Notes Grid with Staggered Animation */}
                {list.length > 0 ? (
                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    {list.map((note, index) => (
                      <div 
                        key={note.id}
                        className="animate-fadeInUp"
                        style={{ animationDelay: `${index * 150}ms` }}
                      >
                        <NoteCard note={note} index={index} />
                      </div>
                    ))}
                  </div>
                ) : (
                  /* Spectacular Empty State */
                  <div className="text-center py-24">
                    <div className="relative inline-block mb-8">
                      <div className="w-40 h-40 bg-gradient-to-br from-blue-400 to-purple-500 rounded-3xl flex items-center justify-center mx-auto shadow-2xl transform rotate-6 animate-float">
                        <i className="fas fa-search text-white text-5xl"></i>
                      </div>
                      <div className="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full animate-ping"></div>
                      <div className="absolute -bottom-2 -left-2 w-6 h-6 bg-cyan-400 rounded-full animate-ping animation-delay-1000"></div>
                    </div>
                    
                    <h3 className="text-3xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 dark:from-white dark:to-slate-300 bg-clip-text text-transparent mb-4">
                      No Notes Found
                    </h3>
                    <p className="text-slate-600 dark:text-slate-400 text-lg mb-8 max-w-md mx-auto">
                      Try different search terms or explore our other categories. Magic is everywhere!
                    </p>
                    
                    <button 
                      onClick={() => { setSearch(''); setCategory('all'); }}
                      className="bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-bold py-4 px-8 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-2xl hover:shadow-3xl flex items-center gap-3 mx-auto"
                    >
                      <i className="fas fa-sparkles animate-pulse"></i>
                      Reset & Explore
                      <i className="fas fa-arrow-right transform group-hover:translate-x-1 transition-transform duration-300"></i>
                    </button>
                  </div>
                )}

                {/* Premium CTA Section */}
                {!isPremium && DATA.notes.some(note => note.isPremium) && (
                  <div className="mt-20 relative">
                    {/* Background Effects */}
                    <div className="absolute -inset-4 bg-gradient-to-r from-amber-400 to-orange-500 rounded-3xl blur-3xl opacity-20 animate-pulse"></div>
                    
                    <div className="relative bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 rounded-3xl p-12 shadow-3xl overflow-hidden">
                      {/* Floating Elements */}
                      <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32 animate-float"></div>
                      <div className="absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full translate-y-24 -translate-x-24 animate-float animation-delay-2000"></div>
                      
                      <div className="relative z-10 text-center text-white">
                        {/* Animated Icon */}
                        <div className="w-24 h-24 bg-white/20 rounded-3xl flex items-center justify-center mx-auto mb-8 backdrop-blur-sm transform hover:scale-110 hover:rotate-12 transition-all duration-500 shadow-2xl">
                          <i className="fas fa-crown text-3xl text-white"></i>
                        </div>
                        
                        <h2 className="text-4xl font-bold font-display mb-6">
                          Unlock the <span className="bg-gradient-to-r from-white to-amber-200 bg-clip-text text-transparent">Magic</span> of Premium
                        </h2>
                        
                        <p className="text-white/90 text-xl mb-8 max-w-2xl mx-auto leading-relaxed">
                          Access exclusive resources, advanced study materials, and premium content designed to skyrocket your academic success! 🚀
                        </p>
                        
                        <button 
                          onClick={onUpgradeRequest}
                          className="bg-white text-amber-600 font-bold py-4 px-12 rounded-2xl hover:bg-slate-100 transition-all duration-300 transform hover:scale-105 shadow-2xl hover:shadow-3xl text-lg flex items-center gap-3 mx-auto group"
                        >
                          <i className="fas fa-rocket group-hover:animate-bounce"></i>
                          Upgrade to Premium Experience
                          <i className="fas fa-sparkles text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      ); 
    };
    
   const DigitalLibrary = ({ openFile, isPremium, onUpgradeRequest }) => { 
  const [activeTab, setActiveTab] = useState('curriculum');
  const [search, setSearch] = useState('');
  const [hoveredCard, setHoveredCard] = useState(null);
  
  const categories = [
    { 
      id: 'curriculum', 
      name: 'Curriculum Books', 
      icon: 'fas fa-graduation-cap', 
      color: 'from-blue-500 to-indigo-500',
      bgColor: 'bg-gradient-to-r from-blue-500 to-indigo-500'
    },
    { 
      id: 'other', 
      name: 'Other Books', 
      icon: 'fas fa-book-open', 
      color: 'from-purple-500 to-pink-500',
      bgColor: 'bg-gradient-to-r from-purple-500 to-pink-500'
    }
  ];
  
  // Properly get current books based on active tab
  const currentBooks = activeTab === 'curriculum' 
    ? DATA.libraryBooks.curriculum 
    : DATA.libraryBooks.otherBooks;
  
  // Filter books with search
  const filteredBooks = currentBooks.filter(book => 
    book.title.toLowerCase().includes(search.toLowerCase()) || 
    (book.author && book.author.toLowerCase().includes(search.toLowerCase()))
  );

  const handleOpenBook = (book) => {
    if (book.isPremium && !isPremium) {
      onUpgradeRequest();
    } else {
      // Create a proper file object that matches what PdfViewerModal expects
      const fileObj = {
        title: book.title,
        link: book.pdf,
        isPremium: book.isPremium
      };
      openFile(fileObj);
    }
  };
  
  const BookCard = ({ book, index }) => (
    <div 
      className="group relative"
      onMouseEnter={() => setHoveredCard(index)}
      onMouseLeave={() => setHoveredCard(null)}
    >
      {/* Animated Background Glow */}
      <div className={`absolute -inset-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-0 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 ${
        hoveredCard === index ? 'animate-pulse' : ''
      }`}></div>
      
      {/* Main Card */}
      <div className="relative bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-2xl border border-white/20 dark:border-slate-700/50 hover:shadow-3xl transition-all duration-500 group-hover:-translate-y-3 backdrop-blur-sm">
        {/* Floating Icon Container */}
        <div className="absolute -top-4 left-6">
          <div className="relative">
            <div className={`w-12 h-12 ${book.isPremium ? 'bg-gradient-to-br from-amber-500 to-orange-500' : 'bg-gradient-to-br from-blue-500 to-indigo-500'} rounded-2xl flex items-center justify-center shadow-2xl transform group-hover:scale-110 group-hover:rotate-12 transition-all duration-500`}>
              <i className={`${book.isPremium ? 'fas fa-crown' : 'fas fa-book'} text-white text-lg`}></i>
            </div>
            {/* Floating Particles */}
            <div className="absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full opacity-0 group-hover:opacity-100 animate-ping"></div>
            <div className="absolute -bottom-1 -left-1 w-3 h-3 bg-cyan-400 rounded-full opacity-0 group-hover:opacity-100 animate-ping animation-delay-300"></div>
          </div>
        </div>

        {/* Premium Ribbon */}
        {book.isPremium && (
          <div className="absolute -top-2 -right-2">
            <div className="bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-1 rounded-full text-xs font-bold shadow-2xl flex items-center gap-1 transform group-hover:scale-110 transition-transform duration-300">
              <i className="fas fa-bolt text-xs"></i>
              PREMIUM
            </div>
          </div>
        )}

        {/* Book Cover */}
        <div className="relative mb-4">
          <img 
            src={book.cover} 
            alt={book.title}
            className="w-full h-48 object-cover rounded-xl shadow-lg group-hover:shadow-2xl transition-all duration-500"
          />
          <div className="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-xl flex items-center justify-center">
            <div className="border-2 border-white rounded-full h-14 w-14 grid place-items-center text-white">
              <i className="fa-solid fa-book-open text-2xl"></i>
            </div>
          </div>
        </div>

        {/* Content Area */}
        <div>
          {/* Title with Gradient Text */}
          <h3 className="font-bold text-lg text-slate-800 dark:text-white mb-2 leading-tight group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:to-purple-600 group-hover:bg-clip-text group-hover:text-transparent transition-all duration-500">
            {book.title}
          </h3>
          
          {/* Author */}
          <p className="text-slate-600 dark:text-slate-400 text-sm mb-4">
            by {book.author}
          </p>

          {/* Status Badge */}
          <div className="flex items-center gap-2 mb-6">
            {book.isPremium && !isPremium ? (
              <div className="flex items-center gap-2 bg-amber-500/10 border border-amber-500/20 px-3 py-1 rounded-full">
                <i className="fas fa-lock text-amber-500 text-xs"></i>
                <span className="text-amber-600 dark:text-amber-400 text-xs font-semibold">Locked</span>
              </div>
            ) : book.isPremium && isPremium ? (
              <div className="flex items-center gap-2 bg-green-500/10 border border-green-500/20 px-3 py-1 rounded-full">
                <i className="fas fa-check text-green-500 text-xs"></i>
                <span className="text-green-600 dark:text-green-400 text-xs font-semibold">Unlocked</span>
              </div>
            ) : (
              <div className="flex items-center gap-2 bg-teal-500/10 border border-teal-500/20 px-3 py-1 rounded-full">
                <i className="fas fa-unlock text-teal-500 text-xs"></i>
                <span className="text-teal-600 dark:text-teal-400 text-xs font-semibold">Free Access</span>
              </div>
            )}
          </div>

          {/* Action Button */}
          <div className="flex gap-3">
            {(!book.isPremium || isPremium) ? (
              <button
                onClick={() => handleOpenBook(book)}
                className="flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 group/btn"
              >
                <i className="fas fa-eye text-sm group-hover/btn:animate-bounce"></i>
                Read Book
                <i className="fas fa-arrow-right text-xs transform group-hover/btn:translate-x-1 transition-transform duration-300"></i>
              </button>
            ) : (
              <button
                onClick={onUpgradeRequest}
                className="flex-1 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 group/btn"
              >
                <i className="fas fa-crown text-sm group-hover/btn:animate-bounce"></i>
                Unlock Premium
                <i className="fas fa-sparkles text-xs opacity-0 group-hover/btn:opacity-100 transition-opacity duration-300"></i>
              </button>
            )}
          </div>
        </div>

        {/* Animated Border */}
        <div className="absolute inset-0 rounded-2xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 opacity-0 group-hover:opacity-100 transition duration-500 -z-10">
          <div className="absolute inset-[2px] rounded-2xl bg-white dark:bg-slate-800"></div>
        </div>
      </div>
    </div>
  );

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-purple-50/30 dark:from-slate-900 dark:via-blue-900/10 dark:to-purple-900/10">
      {/* Animated Background Elements */}
      <div className="fixed top-10 left-10 w-72 h-72 bg-teal-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float"></div>
      <div className="fixed top-20 right-20 w-96 h-96 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float animation-delay-2000"></div>
      <div className="fixed bottom-20 left-1/3 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float animation-delay-4000"></div>

      <div className="relative z-10">
        <div className="pt-12 pb-20 px-4">
          <div className="max-w-7xl mx-auto">
            {/* Hero Header */}
            <div className="text-center mb-16">
              {/* Animated Title Container */}
              <div className="inline-block relative mb-8">
                <div className="absolute -inset-4 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl blur-2xl opacity-30 animate-pulse"></div>
                <div className="relative bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl px-8 py-6 shadow-2xl border border-white/20 dark:border-slate-700/50">
                  <h1 className="text-6xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent font-display mb-4">
                    Digital Library
                  </h1>
                  <p className="text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto leading-relaxed">
                    Your gateway to <span className="font-semibold text-blue-600 dark:text-blue-400">premium educational resources</span> and exclusive study materials
                  </p>
                </div>
              </div>

              {/* Animated Search Bar */}
              <div className="max-w-2xl mx-auto relative mb-8">
                <div className="absolute -inset-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl blur opacity-30 animate-pulse"></div>
                <div className="relative">
                  <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                    <i className="fas fa-search text-blue-500 text-lg"></i>
                  </div>
                  <input
                    value={search}
                    onChange={(e) => setSearch(e.target.value)}
                    placeholder="Discover amazing books... ✨"
                    className="w-full pl-12 pr-4 py-4 bg-white/90 dark:bg-slate-800/90 border border-blue-200 dark:border-blue-800 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-slate-800 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 shadow-2xl backdrop-blur-sm text-lg"
                  />
                  <div className="absolute inset-y-0 right-0 pr-4 flex items-center">
                    <div className="bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-semibold shadow-lg">
                      {filteredBooks.length}
                    </div>
                  </div>
                </div>
              </div>

              {/* Animated Category Selector */}
              <div className="flex justify-center">
                <div className="bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl p-2 shadow-2xl border border-white/20 dark:border-slate-700/50">
                  <div className="flex gap-2">
                    {categories.map((cat, index) => (
                      <button
                        key={cat.id}
                        onClick={() => setActiveTab(cat.id)}
                        className={`group relative px-6 py-3 rounded-xl font-bold transition-all duration-500 transform hover:scale-105 ${
                          activeTab === cat.id 
                          ? `${cat.bgColor} text-white shadow-2xl`
                          : 'text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white hover:bg-white/50 dark:hover:bg-slate-700/50'
                        }`}
                      >
                        <div className="flex items-center gap-3">
                          <i className={`${cat.icon} ${activeTab === cat.id ? 'text-white' : cat.color.replace('from-', 'text-').split('-')[0] + '-500'}`}></i>
                          <span>{cat.name}</span>
                        </div>
                        
                        {/* Active Indicator */}
                        {activeTab === cat.id && (
                          <div className="absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-white rounded-full animate-bounce"></div>
                        )}
                      </button>
                    ))}
                  </div>
                </div>
              </div>
            </div>

            {/* Books Grid with Staggered Animation */}
            {filteredBooks.length > 0 ? (
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {filteredBooks.map((book, index) => (
                  <div 
                    key={book.id}
                    className="animate-fadeInUp"
                    style={{ animationDelay: `${index * 150}ms` }}
                  >
                    <BookCard book={book} index={index} />
                  </div>
                ))}
              </div>
            ) : (
              /* Spectacular Empty State */
              <div className="text-center py-24">
                <div className="relative inline-block mb-8">
                  <div className="w-40 h-40 bg-gradient-to-br from-blue-400 to-purple-500 rounded-3xl flex items-center justify-center mx-auto shadow-2xl transform rotate-6 animate-float">
                    <i className="fas fa-search text-white text-5xl"></i>
                  </div>
                  <div className="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full animate-ping"></div>
                  <div className="absolute -bottom-2 -left-2 w-6 h-6 bg-cyan-400 rounded-full animate-ping animation-delay-1000"></div>
                </div>
                
                <h3 className="text-3xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 dark:from-white dark:to-slate-300 bg-clip-text text-transparent mb-4">
                  No Books Found
                </h3>
                <p className="text-slate-600 dark:text-slate-400 text-lg mb-8 max-w-md mx-auto">
                  Try different search terms or explore our other categories. Magic is everywhere!
                </p>
                
                <button 
                  onClick={() => { setSearch(''); }}
                  className="bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-bold py-4 px-8 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-2xl hover:shadow-3xl flex items-center gap-3 mx-auto"
                >
                  <i className="fas fa-sparkles animate-pulse"></i>
                  Reset & Explore
                  <i className="fas fa-arrow-right transform group-hover:translate-x-1 transition-transform duration-300"></i>
                </button>
              </div>
            )}

            {/* Premium CTA Section */}
            {!isPremium && currentBooks.some(book => book.isPremium) && (
              <div className="mt-20 relative">
                {/* Background Effects */}
                <div className="absolute -inset-4 bg-gradient-to-r from-amber-400 to-orange-500 rounded-3xl blur-3xl opacity-20 animate-pulse"></div>
                
                <div className="relative bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 rounded-3xl p-12 shadow-3xl overflow-hidden">
                  {/* Floating Elements */}
                  <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32 animate-float"></div>
                  <div className="absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full translate-y-24 -translate-x-24 animate-float animation-delay-2000"></div>
                  
                  <div className="relative z-10 text-center text-white">
                    {/* Animated Icon */}
                    <div className="w-24 h-24 bg-white/20 rounded-3xl flex items-center justify-center mx-auto mb-8 backdrop-blur-sm transform hover:scale-110 hover:rotate-12 transition-all duration-500 shadow-2xl">
                      <i className="fas fa-crown text-3xl text-white"></i>
                    </div>
                    
                    <h2 className="text-4xl font-bold font-display mb-6">
                      Unlock the <span className="bg-gradient-to-r from-white to-amber-200 bg-clip-text text-transparent">Magic</span> of Premium
                    </h2>
                    
                    <p className="text-white/90 text-xl mb-8 max-w-2xl mx-auto leading-relaxed">
                      Access exclusive resources, advanced study materials, and premium content designed to skyrocket your academic success! 🚀
                    </p>
                    
                    <button 
                      onClick={onUpgradeRequest}
                      className="bg-white text-amber-600 font-bold py-4 px-12 rounded-2xl hover:bg-slate-100 transition-all duration-300 transform hover:scale-105 shadow-2xl hover:shadow-3xl text-lg flex items-center gap-3 mx-auto group"
                    >
                      <i className="fas fa-rocket group-hover:animate-bounce"></i>
                      Upgrade to Premium Experience
                      <i className="fas fa-sparkles text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></i>
                    </button>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  ); 
};
    // Help Note Modal
    const HelpNoteModal = ({ onClose }) => {
      const [title, setTitle] = useState('');
      const [description, setDescription] = useState('');
      const [file, setFile] = useState(null);
      
      const handleSubmit = (e) => {
        e.preventDefault();
        if (!title.trim() || !description.trim()) {
          alert('Please fill in all fields');
          return;
        }
        
        const message = `*Help Note Submission*\n\n*Title:* ${title}\n*Description:* ${description}\n\nSubmitted via Ganesh Dai Academy`;
        const whatsappUrl = `https://wa.me/${DATA.whatsapp.number}?text=${encodeURIComponent(message)}`;
        
        window.open(whatsappUrl, '_blank');
        onClose();
      };
      
      return (
        <div className="overlay">
          <div className="modal-box glassmorphism text-white relative max-w-md">
            <button onClick={onClose} className="absolute top-4 right-4 text-white/50 hover:text-white text-2xl font-bold">&times;</button>
            <h2 className="text-2xl font-bold mb-4">Submit Help Note</h2>
            <form onSubmit={handleSubmit} className="space-y-4">
              <div>
                <label className="block text-sm font-medium mb-2">Title</label>
                <input 
                  type="text" 
                  value={title}
                  onChange={(e) => setTitle(e.target.value)}
                  className="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/60 focus:ring-2 focus:ring-indigo-400 focus:outline-none"
                  placeholder="Enter note title"
                  required
                />
              </div>
              <div>
                <label className="block text-sm font-medium mb-2">Description</label>
                <textarea 
                  value={description}
                  onChange={(e) => setDescription(e.target.value)}
                  className="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/60 focus:ring-2 focus:ring-indigo-400 focus:outline-none"
                  placeholder="Describe your note or question"
                  rows="4"
                  required
                />
              </div>
              <div>
                <label className="block text-sm font-medium mb-2">Upload PDF (Optional)</label>
                <input 
                  type="file"
                  accept=".pdf"
                  onChange={(e) => setFile(e.target.files[0])}
                  className="w-full p-2 rounded-lg bg-white/10 border border-white/20 text-white file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-500 file:text-white hover:file:bg-indigo-600"
                />
              </div>
              <button type="submit" className="w-full btn-grad text-white font-bold py-3 px-6 rounded-full">
                <i className="fab fa-whatsapp mr-2"></i>Send via WhatsApp
              </button>
            </form>
          </div>
        </div>
      );
    };
    
    // Enhanced Modern SEE Preparation Component
    const SeePreparationComponent = ({ openFile, isPremium, onUpgradeRequest }) => { 
      const [activeTab, setActiveTab] = useState('papers'); 
      const [showHelpModal, setShowHelpModal] = useState(false);
      const [hoveredCard, setHoveredCard] = useState(null);
      
      const categories = [
        { 
          id: 'papers', 
          name: 'Past Papers', 
          icon: 'fas fa-file-lines', 
          color: 'from-blue-500 to-indigo-500',
          bgColor: 'bg-gradient-to-r from-blue-500 to-indigo-500'
        },
        { 
          id: 'guess', 
          name: 'Model Papers', 
          icon: 'fas fa-star', 
          color: 'from-purple-500 to-pink-500',
          bgColor: 'bg-gradient-to-r from-purple-500 to-pink-500'
        },
        { 
          id: 'important', 
          name: 'Important Questions', 
          icon: 'fas fa-question-circle', 
          color: 'from-amber-500 to-orange-500',
          bgColor: 'bg-gradient-to-r from-amber-500 to-orange-500'
        },
        { 
          id: 'routine', 
          name: 'Exam Routine', 
          icon: 'fas fa-calendar-alt', 
          color: 'from-green-500 to-emerald-500',
          bgColor: 'bg-gradient-to-r from-green-500 to-emerald-500'
        }
      ];
      
      const getCurrentData = () => {
        switch(activeTab) {
          case 'papers': return DATA.seePreparation.questionPapers;
          case 'guess': return DATA.seePreparation.guessPapers;
          case 'important': return DATA.seePreparation.importantQuestions;
          case 'routine': return [DATA.seePreparation.routine];
          default: return [];
        }
      };
      
      const currentData = getCurrentData();
      
      const PaperCard = ({ paper, index }) => (
        <div 
          className="group relative"
          onMouseEnter={() => setHoveredCard(index)}
          onMouseLeave={() => setHoveredCard(null)}
        >
          {/* Animated Background Glow */}
          <div className={`absolute -inset-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-0 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 ${
            hoveredCard === index ? 'animate-pulse' : ''
          }`}></div>
          
          {/* Main Card */}
          <div className="relative bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-2xl border border-white/20 dark:border-slate-700/50 hover:shadow-3xl transition-all duration-500 group-hover:-translate-y-3 backdrop-blur-sm">
            {/* Floating Icon Container */}
            <div className="absolute -top-4 left-6">
              <div className="relative">
                <div className={`w-12 h-12 ${paper.isPremium ? 'bg-gradient-to-br from-amber-500 to-orange-500' : 'bg-gradient-to-br from-blue-500 to-indigo-500'} rounded-2xl flex items-center justify-center shadow-2xl transform group-hover:scale-110 group-hover:rotate-12 transition-all duration-500`}>
                  <i className={`fa-solid ${activeTab === 'routine' ? 'fa-calendar-alt' : 'fa-file-pdf'} text-white text-lg`}></i>
                </div>
                {/* Floating Particles */}
                <div className="absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full opacity-0 group-hover:opacity-100 animate-ping"></div>
                <div className="absolute -bottom-1 -left-1 w-3 h-3 bg-cyan-400 rounded-full opacity-0 group-hover:opacity-100 animate-ping animation-delay-300"></div>
              </div>
            </div>

            {/* Premium Ribbon */}
            {paper.isPremium && (
              <div className="absolute -top-2 -right-2">
                <div className="bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 py-1 rounded-full text-xs font-bold shadow-2xl flex items-center gap-1 transform group-hover:scale-110 transition-transform duration-300">
                  <i className="fas fa-bolt text-xs"></i>
                  PREMIUM
                </div>
              </div>
            )}

            {/* Content Area */}
            <div className="pt-8">
              {/* Title with Gradient Text */}
              <h3 className="font-bold text-xl text-slate-800 dark:text-white mb-3 leading-tight group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:to-purple-600 group-hover:bg-clip-text group-hover:text-transparent transition-all duration-500">
                {paper.title}
              </h3>
              
              {/* Subject and Year */}
              <div className="flex items-center gap-2 mb-4">
                {paper.subject && (
                  <span className="text-xs font-semibold bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-2 py-1 rounded-full">
                    {paper.subject}
                  </span>
                )}
                {paper.year && (
                  <span className="text-xs font-semibold bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-2 py-1 rounded-full">
                    {paper.year}
                  </span>
                )}
              </div>
              
              {/* Description */}
              {paper.description && (
                <p className="text-slate-600 dark:text-slate-400 text-sm leading-relaxed mb-6 line-clamp-2">
                  {paper.description}
                </p>
              )}

              {/* Status Badge */}
              {paper.isPremium !== undefined && (
                <div className="flex items-center gap-2 mb-6">
                  {paper.isPremium && !isPremium ? (
                    <div className="flex items-center gap-2 bg-amber-500/10 border border-amber-500/20 px-3 py-1 rounded-full">
                      <i className="fas fa-lock text-amber-500 text-xs"></i>
                      <span className="text-amber-600 dark:text-amber-400 text-xs font-semibold">Locked</span>
                    </div>
                  ) : paper.isPremium && isPremium ? (
                    <div className="flex items-center gap-2 bg-green-500/10 border border-green-500/20 px-3 py-1 rounded-full">
                      <i className="fas fa-check text-green-500 text-xs"></i>
                      <span className="text-green-600 dark:text-green-400 text-xs font-semibold">Unlocked</span>
                    </div>
                  ) : (
                    <div className="flex items-center gap-2 bg-teal-500/10 border border-teal-500/20 px-3 py-1 rounded-full">
                      <i className="fas fa-unlock text-teal-500 text-xs"></i>
                      <span className="text-teal-600 dark:text-teal-400 text-xs font-semibold">Free Access</span>
                    </div>
                  )}
                </div>
              )}

              {/* Action Button */}
              <div className="flex gap-3">
                {activeTab === 'routine' ? (
                  <button
                    onClick={() => openFile(paper)}
                    className="flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 group/btn"
                  >
                    <i className="fas fa-eye text-sm group-hover/btn:animate-bounce"></i>
                    View Routine
                    <i className="fas fa-arrow-right text-xs transform group-hover/btn:translate-x-1 transition-transform duration-300"></i>
                  </button>
                ) : (!paper.isPremium || isPremium) ? (
                  <button
                    onClick={() => openFile(paper)}
                    className="flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 group/btn"
                  >
                    <i className="fas fa-eye text-sm group-hover/btn:animate-bounce"></i>
                    Open PDF
                    <i className="fas fa-arrow-right text-xs transform group-hover/btn:translate-x-1 transition-transform duration-300"></i>
                  </button>
                ) : (
                  <button
                    onClick={onUpgradeRequest}
                    className="flex-1 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-2 group/btn"
                  >
                    <i className="fas fa-crown text-sm group-hover/btn:animate-bounce"></i>
                    Unlock Premium
                    <i className="fas fa-sparkles text-xs opacity-0 group-hover/btn:opacity-100 transition-opacity duration-300"></i>
                  </button>
                )}
              </div>
            </div>

            {/* Animated Border */}
            <div className="absolute inset-0 rounded-2xl bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 opacity-0 group-hover:opacity-100 transition duration-500 -z-10">
              <div className="absolute inset-[2px] rounded-2xl bg-white dark:bg-slate-800"></div>
            </div>
          </div>
        </div>
      );
      
      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-purple-50/30 dark:from-slate-900 dark:via-blue-900/10 dark:to-purple-900/10">
          {/* Animated Background Elements */}
          <div className="fixed top-10 left-10 w-72 h-72 bg-teal-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float"></div>
          <div className="fixed top-20 right-20 w-96 h-96 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float animation-delay-2000"></div>
          <div className="fixed bottom-20 left-1/3 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float animation-delay-4000"></div>

          <div className="relative z-10">
            <div className="pt-12 pb-20 px-4">
              <div className="max-w-7xl mx-auto">
                {/* Hero Header */}
                <div className="text-center mb-16">
                  {/* Animated Title Container */}
                  <div className="inline-block relative mb-8">
                    <div className="absolute -inset-4 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl blur-2xl opacity-30 animate-pulse"></div>
                    <div className="relative bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl px-8 py-6 shadow-2xl border border-white/20 dark:border-slate-700/50">
                      <h1 className="text-6xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent font-display mb-4">
                        SEE Preparation Hub
                      </h1>
                      <p className="text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto leading-relaxed">
                        Your ultimate destination for <span className="font-semibold text-blue-600 dark:text-blue-400">SEE success</span> with past papers, model questions, and expert resources
                      </p>
                    </div>
                  </div>

                  {/* Help Note Button */}
                  <div className="flex justify-center mb-8">
                    <button 
                      onClick={() => setShowHelpModal(true)}
                      className="bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-8 py-4 rounded-2xl font-bold text-lg shadow-2xl hover:shadow-3xl transition-all transform hover:scale-105 flex items-center gap-3"
                    >
                      <i className="fas fa-circle-question text-xl"></i>
                      Need Help? Ask Your Question
                    </button>
                  </div>

                  {/* Animated Category Selector */}
                  <div className="flex justify-center">
                    <div className="bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl p-2 shadow-2xl border border-white/20 dark:border-slate-700/50">
                      <div className="flex flex-wrap gap-2 justify-center">
                        {categories.map((cat, index) => (
                          <button
                            key={cat.id}
                            onClick={() => setActiveTab(cat.id)}
                            className={`group relative px-6 py-3 rounded-xl font-bold transition-all duration-500 transform hover:scale-105 ${
                              activeTab === cat.id 
                              ? `${cat.bgColor} text-white shadow-2xl`
                              : 'text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white hover:bg-white/50 dark:hover:bg-slate-700/50'
                            }`}
                          >
                            <div className="flex items-center gap-3">
                              <i className={`${cat.icon} ${activeTab === cat.id ? 'text-white' : cat.color.replace('from-', 'text-').split('-')[0] + '-500'}`}></i>
                              <span>{cat.name}</span>
                            </div>
                            
                            {/* Active Indicator */}
                            {activeTab === cat.id && (
                              <div className="absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-white rounded-full animate-bounce"></div>
                            )}
                          </button>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>

                {/* Content Grid with Staggered Animation */}
                {currentData.length > 0 ? (
                  <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    {currentData.map((item, index) => (
                      <div 
                        key={item.id}
                        className="animate-fadeInUp"
                        style={{ animationDelay: `${index * 150}ms` }}
                      >
                        <PaperCard paper={item} index={index} />
                      </div>
                    ))}
                  </div>
                ) : (
                  /* Spectacular Empty State */
                  <div className="text-center py-24">
                    <div className="relative inline-block mb-8">
                      <div className="w-40 h-40 bg-gradient-to-br from-blue-400 to-purple-500 rounded-3xl flex items-center justify-center mx-auto shadow-2xl transform rotate-6 animate-float">
                        <i className="fas fa-search text-white text-5xl"></i>
                      </div>
                      <div className="absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full animate-ping"></div>
                      <div className="absolute -bottom-2 -left-2 w-6 h-6 bg-cyan-400 rounded-full animate-ping animation-delay-1000"></div>
                    </div>
                    
                    <h3 className="text-3xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 dark:from-white dark:to-slate-300 bg-clip-text text-transparent mb-4">
                      No Content Available
                    </h3>
                    <p className="text-slate-600 dark:text-slate-400 text-lg mb-8 max-w-md mx-auto">
                      Check back later for new content or explore other categories.
                    </p>
                  </div>
                )}

                {/* Premium CTA Section */}
                {!isPremium && currentData.some(item => item.isPremium) && (
                  <div className="mt-20 relative">
                    {/* Background Effects */}
                    <div className="absolute -inset-4 bg-gradient-to-r from-amber-400 to-orange-500 rounded-3xl blur-3xl opacity-20 animate-pulse"></div>
                    
                    <div className="relative bg-gradient-to-r from-amber-500 via-orange-500 to-red-500 rounded-3xl p-12 shadow-3xl overflow-hidden">
                      {/* Floating Elements */}
                      <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32 animate-float"></div>
                      <div className="absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full translate-y-24 -translate-x-24 animate-float animation-delay-2000"></div>
                      
                      <div className="relative z-10 text-center text-white">
                        {/* Animated Icon */}
                        <div className="w-24 h-24 bg-white/20 rounded-3xl flex items-center justify-center mx-auto mb-8 backdrop-blur-sm transform hover:scale-110 hover:rotate-12 transition-all duration-500 shadow-2xl">
                          <i className="fas fa-crown text-3xl text-white"></i>
                        </div>
                        
                        <h2 className="text-4xl font-bold font-display mb-6">
                          Unlock the <span className="bg-gradient-to-r from-white to-amber-200 bg-clip-text text-transparent">Magic</span> of Premium
                        </h2>
                        
                        <p className="text-white/90 text-xl mb-8 max-w-2xl mx-auto leading-relaxed">
                          Access exclusive resources, advanced study materials, and premium content designed to skyrocket your academic success! 🚀
                        </p>
                        
                        <button 
                          onClick={onUpgradeRequest}
                          className="bg-white text-amber-600 font-bold py-4 px-12 rounded-2xl hover:bg-slate-100 transition-all duration-300 transform hover:scale-105 shadow-2xl hover:shadow-3xl text-lg flex items-center gap-3 mx-auto group"
                        >
                          <i className="fas fa-rocket group-hover:animate-bounce"></i>
                          Upgrade to Premium Experience
                          <i className="fas fa-sparkles text-amber-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>
          
          {showHelpModal && <HelpNoteModal onClose={() => setShowHelpModal(false)} />}
        </div>
      ); 
    };
    
    const VideoSection = () => {
      return (
        <Section title="Video Lessons" subtitle="Watch our curated video content to enhance your learning.">
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {DATA.videos.map((video, index) => (
              <div key={video.id} className="card overflow-hidden slide-in-up" style={{ animationDelay: `${index * 100}ms` }}>
                <div className="relative aspect-video bg-slate-800">
                  <img 
                    src={`https://img.youtube.com/vi/${video.youtubeId}/hqdefault.jpg`} 
                    alt={video.title}
                    className="w-full h-full object-cover"
                  />
                  <div className="absolute inset-0 flex items-center justify-center">
                    <div className="bg-red-600 hover:bg-red-700 text-white rounded-full w-16 h-16 flex items-center justify-center cursor-pointer transition-colors">
                      <i className="fa-solid fa-play text-xl"></i>
                    </div>
                  </div>
                </div>
                <div className="p-4">
                  <h3 className="font-semibold text-slate-800 dark:text-white">{video.title}</h3>
                  <p className="text-sm text-slate-500 dark:text-slate-400 mt-1">{video.description}</p>
                  <a 
                    href={`https://www.youtube.com/watch?v=${video.youtubeId}`} 
                    target="_blank" 
                    rel="noopener noreferrer"
                    className="inline-flex items-center gap-2 mt-3 text-primary-500 hover:text-primary-600 font-medium"
                  >
                    Watch on YouTube <i className="fa-solid fa-external-link-alt text-xs"></i>
                  </a>
                </div>
              </div>
            ))}
          </div>
        </Section>
      );
    };
    
    // Enhanced Modern About Section
    const AboutComponent = () => {
      return (
        <div className="min-h-screen bg-white dark:bg-slate-900">
          {/* Header Section */}
          <div className="relative bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-800 dark:to-slate-900 py-20">
            <div className="absolute inset-0 bg-white/50 dark:bg-slate-900/50"></div>
            <div className="relative max-w-6xl mx-auto px-4 text-center">
              <div className="inline-flex items-center gap-4 bg-white dark:bg-slate-800 rounded-2xl px-6 py-3 shadow-lg border border-slate-200 dark:border-slate-700 mb-8">
                <div className="w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center">
                  <i className="fas fa-university text-white text-lg"></i>
                </div>
                <span className="text-sm font-semibold text-slate-700 dark:text-slate-300">About Ganesh Dai Academy</span>
              </div>
              
              <h1 className="text-5xl font-bold text-slate-800 dark:text-white mb-6 font-display">
                Excellence in <span className="bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">Education</span>
              </h1>
              <p className="text-xl text-slate-600 dark:text-slate-400 max-w-3xl mx-auto leading-relaxed">
                Empowering Grade 11 & 12 students with comprehensive learning resources, 
                expert guidance, and innovative tools for academic success.
              </p>
            </div>
          </div>

          {/* Mission & Vision */}
          <div className="py-16 bg-white dark:bg-slate-900">
            <div className="max-w-6xl mx-auto px-4">
              <div className="grid grid-cols-1 lg:grid-cols-2 gap-12">
                {/* Mission */}
                <div className="bg-white dark:bg-slate-800 rounded-2xl p-8 shadow-lg border border-slate-200 dark:border-slate-700">
                  <div className="flex items-center gap-4 mb-6">
                    <div className="w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center">
                      <i className="fas fa-bullseye text-white text-xl"></i>
                    </div>
                    <div>
                      <h3 className="text-2xl font-bold text-slate-800 dark:text-white">Our Mission</h3>
                      <p className="text-blue-600 dark:text-blue-400 font-semibold">Purpose-driven education</p>
                    </div>
                  </div>
                  <p className="text-slate-600 dark:text-slate-400 leading-relaxed text-lg">
                    To provide accessible, high-quality educational resources that empower students 
                    to excel academically and develop the skills needed for future success. We believe 
                    every student deserves the opportunity to achieve their full potential.
                  </p>
                </div>

                {/* Vision */}
                <div className="bg-white dark:bg-slate-800 rounded-2xl p-8 shadow-lg border border-slate-200 dark:border-slate-700">
                  <div className="flex items-center gap-4 mb-6">
                    <div className="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center">
                      <i className="fas fa-eye text-white text-xl"></i>
                    </div>
                    <div>
                      <h3 className="text-2xl font-bold text-slate-800 dark:text-white">Our Vision</h3>
                      <p className="text-purple-600 dark:text-purple-400 font-semibold">Shaping future leaders</p>
                    </div>
                  </div>
                  <p className="text-slate-600 dark:text-slate-400 leading-relaxed text-lg">
                    To be Nepal's leading educational platform, recognized for innovation, excellence, 
                    and transformative impact on student learning outcomes. We envision a future where 
                    quality education is accessible to all.
                  </p>
                </div>
              </div>
            </div>
          </div>

          {/* Values */}
          <div className="py-16 bg-slate-50 dark:bg-slate-800">
            <div className="max-w-6xl mx-auto px-4">
              <div className="text-center mb-12">
                <h2 className="text-3xl font-bold text-slate-800 dark:text-white mb-4">Our Values</h2>
                <p className="text-slate-600 dark:text-slate-400 text-lg">Principles that guide everything we do</p>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                {[
                  {
                    icon: 'fas fa-graduation-cap',
                    title: 'Excellence',
                    description: 'Commitment to highest quality standards in education',
                    color: 'from-blue-500 to-cyan-500'
                  },
                  {
                    icon: 'fas fa-heart',
                    title: 'Student Focus',
                    description: 'Putting student success at the center of everything',
                    color: 'from-green-500 to-emerald-500'
                  },
                  {
                    icon: 'fas fa-lightbulb',
                    title: 'Innovation',
                    description: 'Continuously improving and adapting to needs',
                    color: 'from-amber-500 to-orange-500'
                  },
                  {
                    icon: 'fas fa-handshake',
                    title: 'Integrity',
                    description: 'Honest, transparent, and ethical practices',
                    color: 'from-purple-500 to-pink-500'
                  }
                ].map((value, index) => (
                  <div key={index} className="bg-white dark:bg-slate-700 rounded-xl p-6 shadow-lg border border-slate-200 dark:border-slate-600 text-center">
                    <div className={`w-12 h-12 bg-gradient-to-br ${value.color} rounded-xl flex items-center justify-center mx-auto mb-4`}>
                      <i className={`${value.icon} text-white text-lg`}></i>
                    </div>
                    <h4 className="font-bold text-slate-800 dark:text-white mb-2">{value.title}</h4>
                    <p className="text-slate-600 dark:text-slate-400 text-sm">{value.description}</p>
                  </div>
                ))}
              </div>
            </div>
          </div>

          {/* Founder Section */}
          <div className="py-16 bg-white dark:bg-slate-900">
            <div className="max-w-4xl mx-auto px-4">
              <div className="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-slate-800 dark:to-slate-700 rounded-2xl p-8 shadow-lg border border-slate-200 dark:border-slate-600">
                <div className="flex flex-col md:flex-row items-center gap-8">
                  <div className="flex-shrink-0">
                    <img 
                      src={DATA.logoUrl} 
                      alt="Ganesh Dahal" 
                      className="w-32 h-32 rounded-2xl object-cover border-4 border-white dark:border-slate-600 shadow-lg"
                    />
                  </div>
                  <div className="flex-1 text-center md:text-left">
                    <h3 className="text-2xl font-bold text-slate-800 dark:text-white mb-2">Ganesh Dahal</h3>
                    <p className="text-blue-600 dark:text-blue-400 font-semibold mb-4">Founder & Educator</p>
                    <p className="text-slate-600 dark:text-slate-400 leading-relaxed">
                      "Our vision for Ganesh Dai Academy stems from a deep belief in the transformative 
                      power of education. We're committed to providing students with the resources and 
                      guidance they need to not just succeed academically, but to develop into confident, 
                      capable individuals ready to make their mark on the world."
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          {/* Features */}
          <div className="py-16 bg-slate-50 dark:bg-slate-800">
            <div className="max-w-6xl mx-auto px-4">
              <div className="text-center mb-12">
                <h2 className="text-3xl font-bold text-slate-800 dark:text-white mb-4">What Sets Us Apart</h2>
                <p className="text-slate-600 dark:text-slate-400 text-lg">Comprehensive solutions for modern education</p>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                {[
                  {
                    icon: 'fas fa-book-open',
                    title: 'Comprehensive Resources',
                    items: ['Subject Notes', 'Model Questions', 'Reference Materials']
                  },
                  {
                    icon: 'fas fa-tools',
                    title: 'Learning Tools',
                    items: ['GPA Calculator', 'Study Planner', 'Progress Tracking']
                  },
                  {
                    icon: 'fas fa-chalkboard-teacher',
                    title: 'Expert Support',
                    items: ['Quality Content', 'Regular Updates', 'Student-focused']
                  }
                ].map((feature, index) => (
                  <div key={index} className="bg-white dark:bg-slate-700 rounded-xl p-6 shadow-lg border border-slate-200 dark:border-slate-600">
                    <div className="w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center mb-4">
                      <i className={`${feature.icon} text-white text-lg`}></i>
                    </div>
                    <h4 className="font-bold text-slate-800 dark:text-white mb-4">{feature.title}</h4>
                    <ul className="space-y-2">
                      {feature.items.map((item, itemIndex) => (
                        <li key={itemIndex} className="flex items-center gap-3 text-slate-600 dark:text-slate-400">
                          <i className="fas fa-check text-green-500 text-sm"></i>
                          <span>{item}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                ))}
              </div>
            </div>
          </div>

          {/* Contact & Social */}
          <div className="py-16 bg-white dark:bg-slate-900">
            <div className="max-w-4xl mx-auto px-4">
              <div className="bg-slate-50 dark:bg-slate-800 rounded-2xl p-8 shadow-lg border border-slate-200 dark:border-slate-600">
                <div className="text-center mb-8">
                  <h3 className="text-2xl font-bold text-slate-800 dark:text-white mb-2">Get In Touch</h3>
                  <p className="text-slate-600 dark:text-slate-400">Connect with us for support and updates</p>
                </div>

                <div className="flex flex-col sm:flex-row gap-4 justify-center">
                  <a 
                    href={DATA.social.youtube}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="flex items-center gap-3 bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-xl font-semibold transition-colors"
                  >
                    <i className="fab fa-youtube text-lg"></i>
                    YouTube Channel
                  </a>
                  <a 
                    href={DATA.social.facebook}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="flex items-center gap-3 bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-xl font-semibold transition-colors"
                  >
                    <i className="fab fa-facebook text-lg"></i>
                    Facebook Page
                  </a>
                </div>
              </div>
            </div>
          </div>

          {/* Footer Note */}
          <div className="py-8 bg-slate-50 dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700">
            <div className="max-w-6xl mx-auto px-4 text-center">
              <p className="text-slate-600 dark:text-slate-400">
                © 2024 Ganesh Dai Academy. Committed to educational excellence.
              </p>
            </div>
          </div>
        </div>
      );
    };
    
    const AfterSeeComponent = () => { 
      return (
        <div className="py-24 bg-slate-900 overflow-hidden">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative grid md:grid-cols-2 items-center gap-12">
            <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[60rem] h-[60rem] bg-gradient-to-tr from-blue-600/20 to-violet-600/20 rounded-full blur-3xl opacity-50"></div>
            {[...Array(5)].map((_,i) => <div key={i} className={`absolute bg-white/10 rounded-full w-2 h-2`} style={{ top: `${Math.random()*100}%`, left: `${Math.random()*100}%`, animation: `twinkle ${2 + Math.random()*3}s infinite alternate`}}></div> )}
            <div className="relative z-10 text-white slide-in-up">
              <p className="font-semibold text-primary-300">WHAT'S NEXT?</p>
              <h2 className="font-display text-4xl md:text-5xl font-extrabold mt-2">Your Next Giant Leap Awaits</h2>
              <p className="mt-6 text-slate-300 max-w-md">{DATA.afterSEE.description}</p>
              <a href={DATA.afterSEE.link} target="_blank" rel="noopener noreferrer" className="btn-grad inline-block mt-8 px-8 py-3 rounded-lg font-semibold text-lg shadow-lg hover:shadow-blue-500/50 transition-shadow">
                Start Learning <i className="fa-solid fa-arrow-up-right-from-square ml-2 text-sm"></i>
              </a>
            </div>
            <div className="relative h-80 md:h-full flex items-center justify-center slide-in-up" style={{animationDelay:'200ms'}}>
              <i className="fa-solid fa-rocket text-9xl md:text-[16rem] text-slate-700" style={{animation: 'float 6s ease-in-out infinite'}}></i>
            </div>
          </div>
        </div>
      ); 
    };
    
    // --- QUIZ COMPONENTS ---
    const QuizTimer = ({ timeLeft }) => { 
      const totalTime = 10; 
      const percentage = (timeLeft / totalTime) * 100; 
      const strokeColor = timeLeft <= 3 ? 'var(--danger-500)' : timeLeft <= 6 ? 'var(--warning-500)' : 'var(--primary-500)'; 
      const sqSize = 60; 
      const strokeWidth = 5; 
      const radius = (sqSize - strokeWidth) / 2; 
      const circumference = radius * Math.PI * 2; 
      const dashOffset = circumference - (circumference * percentage) / 100; 
      
      return (
        <div className="relative" style={{width: sqSize, height: sqSize}}>
          <svg width={sqSize} height={sqSize} viewBox={`0 0 ${sqSize} ${sqSize}`} className="-rotate-90">
            <circle className="text-slate-200 dark:text-slate-700" cx={sqSize/2} cy={sqSize/2} r={radius} strokeWidth={`${strokeWidth}px`} fill="none" stroke="currentColor"/>
            <circle cx={sqSize/2} cy={sqSize/2} r={radius} strokeWidth={`${strokeWidth}px`} fill="none" stroke={strokeColor} strokeDasharray={circumference} strokeDashoffset={circumference} strokeLinecap="round" style={{transition: 'stroke-dashoffset 0.5s linear, stroke 0.5s', strokeDashoffset: dashOffset}} />
          </svg>
          <div className="absolute inset-0 flex items-center justify-center font-bold text-lg" style={{color: strokeColor}}>{timeLeft}</div>
        </div>
      ); 
    };
    
    const DonutChart = ({ percentage }) => { 
      const sqSize = 120; 
      const strokeWidth = 12; 
      const radius = (sqSize - strokeWidth) / 2; 
      const viewBox = `0 0 ${sqSize} ${sqSize}`; 
      const circumference = radius * Math.PI * 2; 
      const dashOffset = circumference - (circumference * percentage) / 100; 
      
      return (
        <svg width={sqSize} height={sqSize} viewBox={viewBox} className="-rotate-90">
          <circle className="text-slate-200 dark:text-slate-700" cx={sqSize/2} cy={sqSize/2} r={radius} strokeWidth={`${strokeWidth}px`} fill="none" stroke="currentColor"/>
          <circle className="text-primary-500" cx={sqSize/2} cy={sqSize/2} r={radius} strokeWidth={`${strokeWidth}px`} fill="none" stroke="currentColor" strokeDasharray={circumference} strokeDashoffset={circumference} strokeLinecap="round" style={{transition: 'stroke-dashoffset 1s ease-out', strokeDashoffset: dashOffset}} />
          <text className="font-bold text-2xl fill-current text-slate-700 dark:text-slate-200" x="50%" y="50%" dy=".3em" textAnchor="middle" style={{ transform: 'rotate(90deg)', transformOrigin: 'center' }}>{`${percentage}%`}</text>
        </svg>
      ); 
    };
    
    const QuizResults = ({ quizData, userAnswers, onRestart, onSelectNew, updateUserStats }) => { 
      const { score, correctAnswers, wrongAnswers, percentage } = useMemo(() => { 
        let correct = 0; 
        quizData.questions.forEach((q, i) => { 
          if (q.correctAnswer === userAnswers[i]) correct++; 
        }); 
        const total = quizData.questions.length; 
        return { 
          score: correct, 
          correctAnswers: correct, 
          wrongAnswers: total - correct, 
          percentage: total > 0 ? Math.round((correct / total) * 100) : 0 
        }; 
      }, [quizData, userAnswers]); 
      
      // Update user stats when results are shown
      useEffect(() => {
        updateUserStats(prev => ({
          ...prev,
          quizzesCompleted: prev.quizzesCompleted + 1,
          achievementsUnlocked: Math.max(prev.achievementsUnlocked, 
            percentage >= 90 ? 3 : // Quiz Master
            prev.quizzesCompleted >= 1 ? 1 : // First Quiz
            prev.achievementsUnlocked)
        }));
      }, []);
      
      return (
        <div className="w-full max-w-4xl mx-auto slide-in-up">
          <div className="card p-6 md:p-8 text-center">
            <h2 className="font-display text-3xl font-bold text-slate-800 dark:text-white">Quiz Results</h2>
            <p className="text-slate-500 dark:text-slate-400 mt-1">You completed the {quizData.title} quiz!</p>
            <div className="my-8 flex flex-col md:flex-row items-center justify-center gap-8">
              <DonutChart percentage={percentage} />
              <div className="flex gap-4 text-left">
                <div className="card p-4 flex-1 bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800/50">
                  <div className="font-bold text-3xl text-green-600 dark:text-green-400">{correctAnswers}</div>
                  <div className="text-sm font-semibold text-green-800 dark:text-green-300">Correct</div>
                </div>
                <div className="card p-4 flex-1 bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800/50">
                  <div className="font-bold text-3xl text-red-600 dark:text-red-400">{wrongAnswers}</div>
                  <div className="text-sm font-semibold text-red-800 dark:text-red-300">Incorrect</div>
                </div>
                <div className="card p-4 flex-1 bg-blue-50 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800/50">
                  <div className="font-bold text-3xl text-blue-600 dark:text-blue-400">{score}/{quizData.questions.length}</div>
                  <div className="text-sm font-semibold text-blue-800 dark:text-blue-300">Score</div>
                </div>
              </div>
            </div>
            <div className="flex flex-col md:flex-row gap-4 justify-center">
              <button onClick={onRestart} className="btn-grad px-8 py-3 rounded-full font-semibold">
                <i className="fa-solid fa-redo mr-2"></i>Play Again
              </button>
              <button onClick={onSelectNew} className="px-8 py-3 rounded-full font-semibold bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 transition">
                Choose Another Quiz
              </button>
            </div>
          </div>
          <div className="card p-6 md:p-8 mt-6 text-left">
            <h3 className="font-display text-2xl font-bold text-slate-800 dark:text-white mb-4">Review Answers</h3>
            <div className="space-y-6">
              {quizData.questions.map((q, i) => { 
                const userAnswer = userAnswers[i]; 
                const isCorrect = q.correctAnswer === userAnswer; 
                return (
                  <div key={i} className="border-b border-slate-200 dark:border-slate-700 pb-4">
                    <p className="font-semibold text-slate-800 dark:text-white">{i+1}. {q.question}</p>
                    <p className={`mt-2 text-sm ${isCorrect ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}`}>
                      <i className={`fa-solid ${isCorrect ? 'fa-check-circle' : 'fa-times-circle'} mr-2`}></i>Your answer: <span className="font-bold">{userAnswer || "Time's up!"}</span>
                    </p>
                    {!isCorrect && (
                      <p className="mt-1 text-sm text-green-600 dark:text-green-400">
                        <i className="fa-solid fa-check-circle mr-2"></i>Correct answer: <span className="font-bold">{q.correctAnswer}</span>
                      </p>
                    )}
                  </div>
                ); 
              })}
            </div>
          </div>
        </div>
      ); 
    };
    
    const QuizComponent = ({ isPremium, onUpgradeRequest, updateUserStats }) => {
      const [view, setView] = useState('subject_select'); 
      const [selectedSubject, setSelectedSubject] = useState(null); 
      const [activeQuizData, setActiveQuizData] = useState(null); 
      const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0); 
      const [userAnswers, setUserAnswers] = useState([]); 
      const [timeLeft, setTimeLeft] = useState(10); 
      const [isTimeUp, setIsTimeUp] = useState(false);
      const [quizStartTime, setQuizStartTime] = useState(null);
      const [freeTrialUsed, setFreeTrialUsed] = useLocalStorage('gda_quiz_trial_used', false);
      
      const handleNext = useCallback(() => { 
        setIsTimeUp(false); 
        if (activeQuizData && currentQuestionIndex < activeQuizData.questions.length - 1) { 
          setCurrentQuestionIndex(prev => prev + 1); 
          setTimeLeft(10); 
        } else { 
          setView('results'); 
        } 
      }, [currentQuestionIndex, activeQuizData]);
      
      useEffect(() => { 
        if (view !== 'quiz' || !activeQuizData) return; 
        const timer = setInterval(() => { 
          setTimeLeft(prev => { 
            if (prev === 1) { 
              setIsTimeUp(true); 
              setTimeout(() => { 
                const newAnswers = [...userAnswers]; 
                newAnswers[currentQuestionIndex] = null; 
                setUserAnswers(newAnswers); 
                handleNext(); 
              }, 1200); 
              return 0; 
            } 
            return prev - 1; 
          }); 
        }, 1000); 
        return () => clearInterval(timer); 
      }, [view, currentQuestionIndex, activeQuizData, handleNext, userAnswers]);
      
      const startQuiz = (quizData) => { 
        // Check if user needs to upgrade
        if (!isPremium && freeTrialUsed) {
          onUpgradeRequest();
          return;
        }
        
        // Mark trial as used if this is the first quiz
        if (!isPremium && !freeTrialUsed) {
          setFreeTrialUsed(true);
        }
        
        setActiveQuizData(quizData); 
        setUserAnswers(Array(quizData.questions.length).fill(null)); 
        setCurrentQuestionIndex(0); 
        setTimeLeft(10); 
        setIsTimeUp(false); 
        setQuizStartTime(new Date());
        setView('quiz'); 
      };
      
      const generateMixedQuiz = (subjectKey, numQuestions) => { 
        const allQuestions = Object.values(DATA.quizzes[subjectKey].chapters).flatMap(chapter => chapter.questions); 
        for (let i = allQuestions.length - 1; i > 0; i--) { 
          const j = Math.floor(Math.random() * (i + 1)); 
          [allQuestions[i], allQuestions[j]] = [allQuestions[j], allQuestions[i]]; 
        } 
        const selectedQuestions = allQuestions.slice(0, numQuestions); 
        return { title: `Mixed ${subjectKey} Quiz (${selectedQuestions.length} Qs)`, questions: selectedQuestions }; 
      };
      
      const handleAnswerSelect = (answer) => { 
        const newAnswers = [...userAnswers]; 
        newAnswers[currentQuestionIndex] = answer; 
        setUserAnswers(newAnswers); 
      };
      
      if (view === 'results') return (
        <Section>
          <QuizResults 
            quizData={activeQuizData} 
            userAnswers={userAnswers} 
            onRestart={() => startQuiz(activeQuizData)} 
            onSelectNew={() => setView('subject_select')} 
            updateUserStats={updateUserStats}
          />
        </Section>
      );
      
      if (view === 'quiz') { 
        const currentQuestion = activeQuizData.questions[currentQuestionIndex]; 
        return (
          <Section>
            <div className="w-full max-w-3xl mx-auto card p-6 md:p-8 slide-in-up relative">
              <div className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2">
                <QuizTimer timeLeft={timeLeft} />
              </div>
              {isTimeUp && (
                <div className="absolute inset-0 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm z-10 flex flex-col items-center justify-center pop-in">
                  <i className="fa-solid fa-clock text-5xl text-red-500"></i>
                  <p className="mt-4 font-bold text-2xl text-red-500">Time's Up!</p>
                </div>
              )}
              <div className="flex justify-between items-center mb-4 pt-4">
                <h2 className="font-display text-xl font-bold text-slate-800 dark:text-white">{activeQuizData.title}</h2>
                <span className="font-semibold text-slate-500 dark:text-slate-400">{currentQuestionIndex + 1} / {activeQuizData.questions.length}</span>
              </div>
              <div className="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2 mb-6">
                <div className="bg-primary-500 h-2 rounded-full transition-all duration-300" style={{ width: `${((currentQuestionIndex + 1) / activeQuizData.questions.length) * 100}%` }}></div>
              </div>
              <h3 className="text-lg md:text-xl font-semibold text-slate-800 dark:text-white mb-6 min-h-[60px]">{currentQuestion.question}</h3>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                {currentQuestion.options.map(option => (
                  <button 
                    key={option} 
                    onClick={() => handleAnswerSelect(option)} 
                    disabled={userAnswers[currentQuestionIndex] !== null} 
                    className={`p-4 rounded-lg text-left font-medium border-2 transition-all duration-300 ${userAnswers[currentQuestionIndex] === option ? 'bg-primary-500 border-primary-500 text-white shadow-lg scale-105' : 'bg-slate-100 dark:bg-slate-800 border-transparent hover:border-primary-400'}`}
                  >
                    {option}
                  </button>
                ))}
              </div>
              <div className="mt-8 text-right">
                <button onClick={handleNext} disabled={userAnswers[currentQuestionIndex] === null} className="btn-grad px-10 py-3 rounded-lg font-semibold">
                  {currentQuestionIndex < activeQuizData.questions.length - 1 ? 'Next Question' : 'Finish Quiz'} <i className="fa-solid fa-arrow-right ml-2"></i>
                </button>
              </div>
            </div>
          </Section>
        ); 
      }
      
      if (view === 'quiz_config') { 
        const questionOptions = [10, 20, 30, 50]; 
        return (
          <Section title={`Configure ${selectedSubject} Quiz`} subtitle="How many questions would you like?">
            <div className="max-w-xl mx-auto text-center">
              <div className="card p-6 grid grid-cols-2 gap-4">
                {questionOptions.map(num => (
                  <button key={num} onClick={() => startQuiz(generateMixedQuiz(selectedSubject, num))} className="btn-grad text-xl font-bold p-6 rounded-xl shadow-lg hover:shadow-2xl transition-shadow">
                    {num}<span className="block text-sm font-semibold opacity-80">Questions</span>
                  </button>
                ))}
              </div>
              <button onClick={() => setView('chapter_select')} className="mt-8 text-sm font-semibold text-slate-500 hover:text-primary-500">
                <i className="fa-solid fa-arrow-left mr-2"></i>Back to Chapters
              </button>
            </div>
          </Section>
        ); 
      }
      
      if (view === 'chapter_select') { 
        const subjectData = DATA.quizzes[selectedSubject]; 
        return (
          <Section title={`${selectedSubject} Quizzes`} subtitle="Choose a chapter or try a mix of all chapters.">
            <div className="max-w-xl mx-auto">
              <button onClick={() => setView('quiz_config')} className="w-full btn-grad text-lg font-semibold p-6 rounded-xl mb-6 shadow-lg hover:shadow-2xl transition-shadow text-left flex justify-between items-center">
                <span><i className="fa-solid fa-random mr-3"></i>Mixed Chapter Quiz</span>
                <i className="fa-solid fa-arrow-right"></i>
              </button>
              <div className="card p-6 space-y-3">
                {Object.entries(subjectData.chapters).map(([chapterTitle, chapterData]) => ( 
                  <button key={chapterTitle} onClick={() => startQuiz({title: chapterTitle, questions: chapterData.questions})} className="w-full text-left p-4 rounded-lg font-medium bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors flex justify-between items-center">
                    <span>{chapterTitle}</span>
                    <span className="text-xs font-semibold text-slate-500">{chapterData.questions.length} Questions</span>
                  </button> 
                ))}
              </div>
              <button onClick={() => { setView('subject_select'); setSelectedSubject(null); }} className="mt-8 text-sm font-semibold text-slate-500 hover:text-primary-500">
                <i className="fa-solid fa-arrow-left mr-2"></i>Back to Subjects
              </button>
            </div>
          </Section>
        ); 
      }
      
      // Show upgrade prompt if trial is used and user is not premium
      if (!isPremium && freeTrialUsed) {
        return (
          <Section title="Test Your Knowledge" subtitle="Upgrade to premium for unlimited quiz access.">
            <div className="max-w-2xl mx-auto text-center">
              <div className="card p-8">
                <i className="fas fa-gem text-6xl text-amber-500 mb-4"></i>
                <h3 className="text-2xl font-bold text-slate-800 dark:text-white mb-2">Quiz Access Limited</h3>
                <p className="text-slate-600 dark:text-slate-400 mb-6">
                  You've used your free trial. Upgrade to premium for unlimited access to all quizzes and premium features.
                </p>
                <button onClick={onUpgradeRequest} className="btn-grad px-8 py-3 rounded-full font-semibold text-lg">
                  Upgrade to Premium - Rs. 199
                </button>
              </div>
            </div>
          </Section>
        );
      }
      
      return (
        <Section title="Test Your Knowledge" subtitle="Select a subject to start a quick quiz and check your preparation.">
          {!isPremium && !freeTrialUsed && (
            <div className="max-w-2xl mx-auto mb-8">
              <div className="card p-4 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800/50">
                <div className="flex items-center">
                  <i className="fas fa-info-circle text-blue-500 text-xl mr-3"></i>
                  <p className="text-blue-700 dark:text-blue-300">
                    <strong>Free Trial:</strong> You can try one quiz for free. Upgrade to premium for unlimited access.
                  </p>
                </div>
              </div>
            </div>
          )}
          
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {Object.entries(DATA.quizzes).map(([subject, quizMeta]) => ( 
              <div key={subject} className="card p-6 text-center slide-in-up">
                <div className="h-16 w-16 mx-auto rounded-full bg-blue-100 dark:bg-blue-900/40 grid place-items-center text-primary-500 text-3xl mb-4">
                  <i className={quizMeta.icon}></i>
                </div>
                <h3 className="font-display text-xl font-semibold text-slate-800 dark:text-white">{subject}</h3>
                <p className="text-slate-500 dark:text-slate-400 mt-1 mb-6">{quizMeta.title}</p>
                <button onClick={() => { setSelectedSubject(subject); setView('chapter_select'); }} className="btn-grad w-full px-6 py-2.5 rounded-lg font-semibold">
                  Start Quiz
                </button>
              </div> 
            ))}
          </div>
        </Section>
      );
    };
    
    const SearchModal = ({ isOpen, onClose, openFile, isPremium, onUpgradeRequest }) => { 
      const [query, setQuery] = useState(""); 
      
      const searchableIndex = useMemo(() => { 
        if (!isOpen) return []; 
        const notes = DATA.notes.map(item => ({...item, type: 'Note'})); 
        const books = [...DATA.libraryBooks.curriculum, ...DATA.libraryBooks.otherBooks].map(item => ({...item, pdf: item.pdf, type: 'Book'})); 
        const pastPapers = DATA.seePreparation.questionPapers.map(item => ({...item, pdf: item.pdf, type: 'Past Paper'})); 
        const guessPapers = DATA.seePreparation.guessPapers.map(item => ({...item, pdf: item.pdf, type: 'Model Paper'})); 
        const importantQuestions = DATA.seePreparation.importantQuestions.map(item => ({...item, pdf: item.pdf, type: 'Important Question'})); 
        return [...notes, ...books, ...pastPapers, ...guessPapers, ...importantQuestions]; 
      }, [isOpen]); 
      
      const results = useMemo(() => { 
        if (!query) return []; 
        return searchableIndex.filter(item => item.title.toLowerCase().includes(query.toLowerCase())); 
      }, [query, searchableIndex]); 
      
      useEffect(() => { 
        if (!isOpen) setQuery(""); 
      }, [isOpen]); 
      
      if (!isOpen) return null; 
      
      const handleResultClick = (item) => { 
        if (item.isPremium && !isPremium) {
          onUpgradeRequest();
        } else {
          openFile(item); 
        }
        onClose(); 
      }; 
      
      return (
        <div className="overlay pt-16 md:pt-24" onClick={onClose}>
          <div className="w-full max-w-2xl card p-0 flex flex-col slide-in-up" onClick={e => e.stopPropagation()}>
            <div className="relative p-2">
              <i className="fa-solid fa-search absolute top-1/2 left-6 -translate-y-1/2 text-slate-400 text-xl"></i>
              <input type="search" placeholder="Search for notes, books, papers..." className="w-full bg-slate-100 dark:bg-slate-800 text-lg font-semibold pl-12 pr-6 py-4 rounded-md outline-none focus:ring-2 focus:ring-primary-500" value={query} onChange={e => setQuery(e.target.value)} autoFocus />
            </div>
            <div className="overflow-y-auto max-h-[60vh] p-2">
              {query && results.length === 0 && <p className="text-center p-8 text-slate-500">No results found for "{query}"</p>}
              <ul className="space-y-1">
                {results.map((item, i) => ( 
                  <li key={`${item.type}-${item.id || i}`}>
                    <button onClick={() => handleResultClick(item)} className="w-full text-left flex items-center gap-4 p-4 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                      <i className={`fa-solid ${item.type === 'Note' ? 'fa-book-open' : item.type === 'Book' ? 'fa-swatchbook' : 'fa-file-alt'} text-primary-500 w-5 text-center`}></i>
                      <div className="flex-1">
                        <span className="font-semibold text-slate-800 dark:text-slate-200">{item.title}</span>
                      </div>
                      <div className="flex items-center gap-2">
                        {item.isPremium && (
                          <span className="text-xs font-bold text-amber-600 bg-amber-100 dark:bg-amber-900/30 px-2 py-1 rounded">
                            <i className="fas fa-crown mr-1"></i> Premium
                          </span>
                        )}
                        <span className="text-xs font-bold uppercase text-slate-400 bg-slate-200 dark:bg-slate-700 px-2 py-1 rounded">{item.type}</span>
                      </div>
                    </button>
                  </li> 
                ))}
              </ul>
            </div>
          </div>
        </div>
      ); 
    };
    
    // --- MAIN APP ---
    const App = () => {
      const [active, setActive] = useState("home");
      const [isDark, setIsDark] = useLocalStorage('gda_theme_dark', false);
      const [userName, setUserName] = useLocalStorage('gda_user_name', null);
      const [certShown, setCertShown] = useLocalStorage('gda_certificate_shown', false);
      const [isPremium, setIsPremium] = useLocalStorage('gda_is_premium', false);
      const [uiState, setUiState] = useState('loading');
      const [viewerFile, setViewerFile] = useState(null);
      const [isSearchOpen, setIsSearchOpen] = useState(false);
      const [isPaymentModalOpen, setIsPaymentModalOpen] = useState(false);
      
      // User stats for progress tracking
      const [userStats, setUserStats] = useLocalStorage('gda_user_stats', {
        notesRead: 0,
        quizzesCompleted: 0,
        studyTime: 0, // in minutes
        achievementsUnlocked: 0,
        lastActive: new Date().toISOString()
      });
      
      useEffect(() => { 
        document.documentElement.classList.toggle('dark', isDark); 
        document.body.style.backgroundColor = isDark ? 'var(--bg-color-dark)' : 'var(--bg-color-light)'; 
      }, [isDark]);
      
      useEffect(() => { 
        const timer = setTimeout(() => { 
          if (userName && certShown) setUiState('ready'); 
          else if (userName && !certShown) setUiState('certificate'); 
          else setUiState('name'); 
        }, 500); 
        return () => clearTimeout(timer); 
      }, [userName, certShown]);
      
      const handleSaveName = (name) => { 
        setUserName(name); 
        setUiState('celebration'); 
        setTimeout(() => setUiState('certificate'), 3500); 
      };
      
      const handleContinueFromCert = () => { 
        setCertShown(true); 
        setUiState('ready'); 
      };
      
      const handleUpgradeRequest = () => {
        setIsPaymentModalOpen(true);
      };
      
      const handlePaymentSuccess = () => { 
        setIsPremium(true); 
        setIsPaymentModalOpen(false); 
      };
      
      const updateUserStats = (updater) => {
        setUserStats(prev => {
          const newStats = typeof updater === 'function' ? updater(prev) : updater;
          return { ...newStats, lastActive: new Date().toISOString() };
        });
      };
      
      const renderContent = () => {
        switch(active) {
          case 'notes': 
            return <NotesExplorer openFile={setViewerFile} isPremium={isPremium} onUpgradeRequest={handleUpgradeRequest} />;
          case 'library': 
            return <DigitalLibrary openFile={setViewerFile} isPremium={isPremium} onUpgradeRequest={handleUpgradeRequest} />;
          case 'prep': 
            return <SeePreparationComponent openFile={setViewerFile} isPremium={isPremium} onUpgradeRequest={handleUpgradeRequest} />;
          case 'quizzes': 
            return <QuizComponent isPremium={isPremium} onUpgradeRequest={handleUpgradeRequest} updateUserStats={updateUserStats} />;
          case 'videos':
            return <VideoSection />;
          case 'aftersee': 
            return <AfterSeeComponent />;
          case 'about': 
            return <AboutComponent />;
          default: 
            return <Dashboard userName={userName} go={setActive} isPremium={isPremium} onUpgradeClick={handleUpgradeRequest} userStats={userStats} />;
        }
      };
      
      if (uiState !== 'ready') { 
        return <> 
          {uiState === 'loading' && <div className="h-screen w-screen" style={{backgroundColor: isDark ? 'var(--bg-color-dark)' : 'var(--bg-color-light)'}}></div>} 
          {uiState === 'name' && <NameCaptureModal onSave={handleSaveName} />} 
          {uiState === 'celebration' && <WelcomeCelebration name={userName} />} 
          {uiState === 'certificate' && <CertificateModal name={userName} onContinue={handleContinueFromCert} />} 
        </> ; 
      }
      
      return (
        <div className="min-h-screen flex flex-col">
          <Header 
            active={active} 
            setActive={setActive} 
            isDark={isDark} 
            toggleTheme={() => setIsDark(d => !d)} 
            onSearchClick={() => setIsSearchOpen(true)} 
            isPremium={isPremium}
            onUpgradeClick={handleUpgradeRequest}
          />
          <main className="flex-1">{renderContent()}</main>
          <Footer go={setActive}/>
          <AskQuestionFAB />
          <SearchModal 
            isOpen={isSearchOpen} 
            onClose={() => setIsSearchOpen(false)} 
            openFile={setViewerFile} 
            isPremium={isPremium}
            onUpgradeRequest={handleUpgradeRequest}
          />
          {viewerFile && (
            <PdfViewerModal 
              pdfInfo={viewerFile} 
              onClose={() => setViewerFile(null)} 
              isPremium={isPremium}
              onUpgradeRequest={handleUpgradeRequest}
            />
          )}
          {isPaymentModalOpen && (
            <PaymentModal 
              userName={userName} 
              onPaymentSuccess={handlePaymentSuccess} 
              onClose={() => setIsPaymentModalOpen(false)} 
            />
          )}
        </div>
      );
    };

    ReactDOM.render(<App/>, document.getElementById('root'));
  </script>
</body>
</html>
